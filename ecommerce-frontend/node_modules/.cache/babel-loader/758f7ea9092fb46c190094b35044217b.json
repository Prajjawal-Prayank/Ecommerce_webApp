{"ast":null,"code":"import _defineProperty from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Layout from'../core/Layout';import{isAuthenticated}from'../auth';import{Redirect}from'react-router-dom';import{read,update,updateUser}from'./apiUser';var Profile=function Profile(_ref){var match=_ref.match;//helps in accessing contents of URL\nvar _useState=useState({name:\"\",email:\"\",password:\"\",newPassword:\"\",confirmPassword:\"\",error:\"\",success:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var name=values.name,email=values.email,password=values.password,newPassword=values.newPassword,success=values.success,error=values.error,confirmPassword=values.confirmPassword;var _isAuthenticated=isAuthenticated(),token=_isAuthenticated.token;var init=function init(userId){read(userId,token).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:true}));}else{setValues(_objectSpread(_objectSpread({},values),{},{name:data.name,email:data.email}));}});};useEffect(function(){init(match.params.userId);},[]);var handleChange=function handleChange(name){return function(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},name,e.target.value)));};};var clickSubmit=function clickSubmit(e){e.preventDefault();update(match.params.userId,token,{name:name,email:email,password:password,newPassword:newPassword,confirmPassword:confirmPassword}).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error,confirmPassword:\"\"}));}else{//updating in localStorage\nupdateUser(data,function(){setValues(_objectSpread(_objectSpread({},values),{},{name:data.name,email:data.email,success:true}));});}});};var redirectUser=function redirectUser(success){if(success){return/*#__PURE__*/React.createElement(Redirect,{to:\"/user/dashboard\"});}};var showError=function showError(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},error);};var profileUpdate=function profileUpdate(name,email){return/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:handleChange('name'),className:\"form-control\",value:name})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",onChange:handleChange('email'),className:\"form-control\",value:email,disabled:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:handleChange('password'),className:\"form-control\",value:password})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"New Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:handleChange('newPassword'),className:\"form-control\",value:newPassword})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Confirm New Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:handleChange('confirmPassword'),className:\"form-control\",value:confirmPassword})),/*#__PURE__*/React.createElement(\"button\",{onClick:clickSubmit,className:\"btn btn-primary\"},\"Submit\"));};return/*#__PURE__*/React.createElement(Layout,{title:\"Profile\",description:\"Update your profile\",className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mr-5 ml-5 pr-5 pl-5\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mb-4\"},\"Profile Update\"),showError(),profileUpdate(name,email),redirectUser(success)));};export default Profile;","map":{"version":3,"sources":["D:/B Tech/WebD/Ecommerce_webApp/ecommerce-frontend/src/user/Profile.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Redirect","read","update","updateUser","Profile","match","name","email","password","newPassword","confirmPassword","error","success","values","setValues","token","init","userId","then","data","params","handleChange","e","target","value","clickSubmit","preventDefault","redirectUser","showError","display","profileUpdate"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport Layout from '../core/Layout';\r\nimport {isAuthenticated} from '../auth';\r\nimport { Redirect} from 'react-router-dom';\r\nimport {read,update,updateUser} from './apiUser';\r\n\r\nconst Profile=({match})=>{    //helps in accessing contents of URL\r\n    const [values,setValues]=useState({\r\n        name:\"\",\r\n        email:\"\",\r\n        password:\"\",\r\n        newPassword:\"\",\r\n        confirmPassword:\"\",\r\n        error:\"\",\r\n        success:false\r\n    }); \r\n\r\n    const {name,email,password,newPassword,success,error,confirmPassword}=values;\r\n    const {token}=isAuthenticated();\r\n\r\n    const init=(userId)=>{  \r\n        read(userId,token)\r\n            .then(data=>{\r\n                if(data.error){\r\n                    setValues({...values,error:true});\r\n                }else{\r\n                    setValues({...values,name:data.name,email:data.email});\r\n                }\r\n            });\r\n    }; \r\n\r\n    useEffect(()=>{\r\n        init(match.params.userId);\r\n    },[]);\r\n\r\n\r\n    const handleChange=name=>e=>{\r\n        setValues({...values,error:false,[name]:e.target.value});   \r\n    }\r\n\r\n    const clickSubmit=e=>{\r\n        e.preventDefault();\r\n        update(match.params.userId,token,{name,email,password,newPassword,confirmPassword})\r\n            .then(data=>{\r\n                if(data.error){\r\n                    setValues({...values,error:data.error,confirmPassword:\"\"})\r\n                }else{\r\n                    //updating in localStorage\r\n                    updateUser(data,()=>{\r\n                        setValues({...values,name:data.name,email:data.email,success:true})\r\n                    });\r\n                }\r\n            });\r\n        };  \r\n    \r\n\r\n    const redirectUser=(success)=>{\r\n        if(success){\r\n            return <Redirect to=\"/user/dashboard\" />\r\n        }\r\n    }\r\n\r\n    const showError=()=>(\r\n        <div className=\"alert alert-danger\" style={{display:error?'':'none'}}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const profileUpdate=(name,email)=>(\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input type=\"text\" onChange={handleChange('name')} className=\"form-control\" value={name}/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input type=\"email\" onChange={handleChange('email')} className=\"form-control\" value={email} disabled />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input type=\"password\" onChange={handleChange('password')} className=\"form-control\" value={password} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">New Password</label>\r\n                <input type=\"password\" onChange={handleChange('newPassword')} className=\"form-control\" value={newPassword}/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Confirm New Password</label>\r\n                <input type=\"password\" onChange={handleChange('confirmPassword')} className=\"form-control\" value={confirmPassword}/>\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    )\r\n\r\n    return(\r\n        <Layout title='Profile' description='Update your profile' className=\"container-fluid\">\r\n            <div className=\"mr-5 ml-5 pr-5 pl-5\">\r\n                <h2 className=\"mb-4\">Profile Update</h2>\r\n                {showError()}\r\n                {profileUpdate(name,email)}\r\n                {redirectUser(success)}\r\n            </div>\r\n        </Layout>\r\n    );\r\n\r\n\r\n};\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}