{"ast":null,"code":"import _slicedToArray from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Layout from'../core/Layout';import{isAuthenticated}from'../auth';import{Link}from'react-router-dom';import{getPurchaseHistory}from'./apiUser';import moment from'moment';var Dashboard=function Dashboard(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),history=_useState2[0],setHistory=_useState2[1];var _isAuthenticated=isAuthenticated(),_isAuthenticated$user=_isAuthenticated.user,_id=_isAuthenticated$user._id,name=_isAuthenticated$user.name,email=_isAuthenticated$user.email,role=_isAuthenticated$user.role;//_id,\nvar token=isAuthenticated().token;var userLinks=function userLinks(){return/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-header\"},\"User Links \"),/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group\"},/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\"},/*#__PURE__*/React.createElement(Link,{className:\"nav-link\",to:\"/cart\"},\"My Cart\")),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\"},/*#__PURE__*/React.createElement(Link,{className:\"nav-link\",to:\"/profile/\".concat(_id)},\"Update Profile\")),role>0?/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\"},/*#__PURE__*/React.createElement(Link,{className:\"nav-link\",to:\"/admin/dashboard\"},\"Admin Dashboard \")):null));};var init=function init(userId,token){getPurchaseHistory(userId,token).then(function(data){if(data.error){console.lof(data.error);}else{setHistory(data);}});};useEffect(function(){init(_id,token);},[]);var userInfo=function userInfo(){return/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-5\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"card-header\"},\"User Information\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group\"},/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\"},name),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\"},email),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\"},role?\"Admin\":\"Registered User\")));};var purchaseHistory=function purchaseHistory(history){return/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-5\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"card-header\"},\"Purchase history\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group\"},/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\"},history.map(function(h,i){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"hr\",null),h.products.map(function(p,i){return/*#__PURE__*/React.createElement(\"div\",{key:i},/*#__PURE__*/React.createElement(\"h6\",null,\"Product name: \",p.name),/*#__PURE__*/React.createElement(\"h6\",null,\"Product price: $\",p.price),/*#__PURE__*/React.createElement(\"h6\",null,\"Purchase date:\",\" \",moment(p.createdAt).format('MMMM Do YYYY, h:mm:ss a')));}));}))));};return/*#__PURE__*/React.createElement(Layout,{title:\"Dashboard\",description:\"Welcome \".concat(name,\"!\"),className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},userLinks()),/*#__PURE__*/React.createElement(\"div\",{className:\"col-9\"},userInfo(),purchaseHistory(history))));};export default Dashboard;","map":{"version":3,"sources":["D:/B Tech/WebD/Ecommerce_webApp/ecommerce-frontend/src/user/UserDashboard.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","getPurchaseHistory","moment","Dashboard","history","setHistory","user","_id","name","email","role","token","userLinks","init","userId","then","data","error","console","lof","userInfo","purchaseHistory","map","h","i","products","p","price","createdAt","format"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport Layout from '../core/Layout';\r\nimport {isAuthenticated} from '../auth';\r\nimport { Link} from 'react-router-dom';\r\nimport {getPurchaseHistory} from './apiUser';\r\nimport moment from 'moment';\r\n\r\nconst Dashboard=()=>{\r\n\r\n    const [history,setHistory]=useState([]);\r\n    const {user:{_id,name,email,role}}= isAuthenticated();   //_id,\r\n    const token=isAuthenticated().token;\r\n\r\n    const userLinks=()=>{\r\n        return (\r\n            <div className=\"card\">\r\n                <h4 className=\"card-header\">User Links </h4>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/cart\">My Cart</Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to={`/profile/${_id}`}>Update Profile</Link>\r\n                    </li>\r\n                    {role>0 ? (<li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/admin/dashboard\">Admin Dashboard </Link>\r\n                    </li>):null }\r\n                </ul>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    const init=(userId,token)=>{\r\n        getPurchaseHistory(userId,token)\r\n            .then(data=>{\r\n                if(data.error){\r\n                    console.lof(data.error);\r\n                }else{\r\n                    setHistory(data);\r\n                }\r\n            })\r\n    };\r\n\r\n    useEffect(()=>{\r\n        init(_id,token);\r\n    },[]);\r\n\r\n    const userInfo=()=>{\r\n        return (\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">User Information</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">{name}</li>\r\n                    <li className=\"list-group-item\">{email}</li>\r\n                    <li className=\"list-group-item\">{role?\"Admin\" : \"Registered User\"}</li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    };\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\nconst purchaseHistory = history => {\r\n    return (\r\n        <div className=\"card mb-5\">\r\n            <h3 className=\"card-header\">Purchase history</h3>\r\n            <ul className=\"list-group\">\r\n                <li className=\"list-group-item\">\r\n                    {history.map((h, i) => {\r\n                        return (\r\n                            <div>\r\n                                <hr />\r\n                                {h.products.map((p, i) => {\r\n                                    return (\r\n                                        <div key={i}>\r\n                                            <h6>Product name: {p.name}</h6>\r\n                                            <h6>Product price: ${p.price}</h6>\r\n                                            <h6>\r\n                                                Purchase date:{\" \"}\r\n                                                {moment(p.createdAt).format('MMMM Do YYYY, h:mm:ss a')}\r\n                                            </h6>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n    return (\r\n        <Layout title=\"Dashboard\" description={`Welcome ${name}!`} className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    {userLinks()}\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    {userInfo()} \r\n                    {purchaseHistory(history)}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n};\r\n\r\n\r\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}