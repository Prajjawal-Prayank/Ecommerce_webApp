{"ast":null,"code":"import _defineProperty from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{getCategories,list}from'./apiCore';import Card from'./Card';var Search=function Search(){var _useState=useState({categories:[],//will help in displaying all the categories\ncategory:'',//will tell us what category is selected\nsearch:'',//will keep whatever text is written in search field\nresults:'',//will keep output of SEARCH\nsearched:false}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var categories=data.categories,category=data.category,search=data.search,results=data.results,searched=data.searched;var loadCategories=function loadCategories(){getCategories().then(function(data){if(data.error){console.log(data.error);}else{setData(_objectSpread(_objectSpread({},data),{},{categories:data}));}});};useEffect(function(){loadCategories();},[]);var searchData=function searchData(){if(search){list({search:search||undefined,category:category}).then(function(response){if(response.error){console.log(response.error);}else{setData(_objectSpread(_objectSpread({},data),{},{results:response,searched:true}));}});}};var searchSubmit=function searchSubmit(event){event.preventDefault();searchData();};var handleChange=function handleChange(name){return function(event){var _objectSpread2;setData(_objectSpread(_objectSpread({},data),{},(_objectSpread2={},_defineProperty(_objectSpread2,name,event.target.value),_defineProperty(_objectSpread2,\"searched\",false),_objectSpread2)));};};var searchMessage=function searchMessage(searched,results){if(searched){if(results.length>0)return\"Found \".concat(results.length,\" products\");if(results.length<1)return\"No products found\";}};var searchedProducts=function searchedProducts(){var results=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"mt-4 mb-4\"},searchMessage(searched,results)),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},results&&results.map(function(product,i){return/*#__PURE__*/React.createElement(Card,{key:i,product:product});})));};var searchForm=function searchForm(){return/*#__PURE__*/ (//span is used in the form because we want to to show all the 3 components (category selector,\n//,search input field,search button) in a single line \nReact.createElement(\"form\",{onSubmit:searchSubmit},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"select\",{className:\"btn mr-2\",onChange:handleChange(\"category\")},/*#__PURE__*/React.createElement(\"option\",{value:\"All\"},\"All\"),categories.map(function(c,i){return/*#__PURE__*/React.createElement(\"option\",{key:i,value:c._id},c.name);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group input-group-lg\"},/*#__PURE__*/React.createElement(\"input\",{type:\"search\",className:\"form-control\",onChange:handleChange(\"search\"),placeholder:\"Search for products\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\",style:{border:'none'}},/*#__PURE__*/React.createElement(\"button\",{className:\"input-group-text ml-2\"},\"Search \")))));};return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mb-3\"},searchForm()),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mb-3\"},searchedProducts(results)));};export default Search;","map":{"version":3,"sources":["D:/B Tech/WebD/Ecommerce_webApp/ecommerce-frontend/src/core/Search.js"],"names":["React","useState","useEffect","getCategories","list","Card","Search","categories","category","search","results","searched","data","setData","loadCategories","then","error","console","log","searchData","undefined","response","searchSubmit","event","preventDefault","handleChange","name","target","value","searchMessage","length","searchedProducts","map","product","i","searchForm","c","_id","border"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {getCategories,list} from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst Search=()=>{\r\n    const [data,setData]=useState({\r\n        categories:[],      //will help in displaying all the categories\r\n        category:'',        //will tell us what category is selected\r\n        search:'',          //will keep whatever text is written in search field\r\n        results:'',         //will keep output of SEARCH\r\n        searched:false\r\n    });\r\n\r\n    const {categories,category,search,results,searched}=data;\r\n\r\n    const loadCategories=()=>{\r\n        getCategories()\r\n        .then(data=>{\r\n            if(data.error){\r\n                console.log(data.error);\r\n            }else{\r\n                setData({...data,categories: data});\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadCategories();\r\n    },[]);\r\n\r\n    const searchData=()=>{\r\n        if(search){\r\n            list({search:search || undefined, category:category})\r\n            .then(response=>{\r\n                if(response.error){\r\n                    console.log(response.error);\r\n                }else{\r\n                    setData({...data,results:response,searched:true});\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    const searchSubmit=(event)=>{\r\n        event.preventDefault();\r\n        searchData();\r\n    };\r\n\r\n    const handleChange=name=>event=>{\r\n        setData({...data,[name]:event.target.value,searched:false});\r\n    };\r\n\r\n\r\n    const searchMessage=(searched,results)=>{\r\n        if(searched){\r\n            if(results.length>0)\r\n                return `Found ${results.length} products`;\r\n            if(results.length<1)\r\n                return `No products found`;     \r\n        }\r\n    }\r\n\r\n    const searchedProducts=(results=[])=>{\r\n        return (\r\n            <div>\r\n                <h2 className=\"mt-4 mb-4\">\r\n                    {searchMessage(searched,results)}\r\n                </h2>\r\n                <div className=\"row\" > \r\n                    {results && results.map((product,i)=>(\r\n                        <Card key={i} product={product} />\r\n                    ))}\r\n            </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const searchForm=()=>(\r\n        //span is used in the form because we want to to show all the 3 components (category selector,\r\n        //,search input field,search button) in a single line \r\n        <form onSubmit={searchSubmit}>\r\n            <span className=\"input-group-text\"> \r\n                <div className=\"input-group-prepend\">\r\n                    <select className=\"btn mr-2\" onChange={handleChange(\"category\")}>\r\n                        <option value=\"All\">All</option>\r\n                            {categories.map((c,i)=>(\r\n                                <option key={i} value={c._id} >{c.name}</option>\r\n                            ))}\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"input-group input-group-lg\">\r\n                    <input type=\"search\" className=\"form-control\" onChange={handleChange(\"search\")} \r\n                        placeholder=\"Search for products\" />\r\n                </div>\r\n\r\n                <div className=\"input-group-append\" style={{border:'none'}}>\r\n                    <button className=\"input-group-text ml-2\">Search </button>\r\n                </div>\r\n\r\n            </span>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"row\" >\r\n            <div className=\"container mb-3\">\r\n                {searchForm()}\r\n            </div>\r\n            <div className=\"container-fluid mb-3\">\r\n                {searchedProducts(results)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}