{"ast":null,"code":"var _jsxFileName = \"D:\\\\B Tech\\\\WebD\\\\ecommerce-frontend\\\\src\\\\user\\\\apiUser.js\";\nimport { API } from '../config';\nexport const read = (userId, token) => {\n  return fetch(`${API}/user/${userId}`, {\n    method: \"GET\",\n    headers: {\n      Accept: 'application/json',\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\nexport const update = (userId, token, user) => {\n  return fetch(`${API}/user/${userId}`, {\n    method: \"PUT\",\n    headers: {\n      Accept: 'application/json',\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify(user)\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n}; //update info in the localStorage then and there so that user does not need to signin again\n\nexport const updateUser = (user, next) => {\n  if (typeof window !== 'undefined') {\n    if (localStorage.getItem('jwt')) {\n      let auth = JSON.parse(localStorage.getItem('jwt'));\n      auth.user = user;\n      localStorage.setItem('jwt', JSON.stringify(auth));\n      next();\n    }\n  }\n};\nexport const getPurchaseHistory = (userId, token) => {\n  return fetch(`${API}/orders/by/user/${userId}`, {\n    method: \"GET\",\n    headers: {\n      Accept: 'application/json',\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(response => {\n    return response.json();\n  }).catch(err => console.log(err));\n};\n\nconst purchaseHistory = history => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"Purchase history\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-group-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, history.map((h, i) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 33\n      }\n    }), h.products.map((p, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 45\n        }\n      }, \"Product name: \", p.name), /*#__PURE__*/React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 45\n        }\n      }, \"Product price: $\", p.price), /*#__PURE__*/React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 45\n        }\n      }, \"Purchased date:\", \" \", moment(p.createdAt).fromNow()));\n    }));\n  }))));\n};","map":{"version":3,"sources":["D:/B Tech/WebD/ecommerce-frontend/src/user/apiUser.js"],"names":["API","read","userId","token","fetch","method","headers","Accept","Authorization","then","response","json","catch","err","console","log","update","user","body","JSON","stringify","updateUser","next","window","localStorage","getItem","auth","parse","setItem","getPurchaseHistory","purchaseHistory","history","map","h","i","products","p","name","price","moment","createdAt","fromNow"],"mappings":"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","sourcesContent":["import {API} from '../config';\r\n\r\nexport const read=(userId,token)=>{\r\n    return fetch(`${API}/user/${userId}`,{\r\n        method: \"GET\",\r\n        headers:{\r\n            Accept:'application/json',         \r\n            \"Content-Type\" : \"application/json\", \r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response=>{\r\n        return response.json();\r\n    })\r\n    .catch(err=>console.log(err));\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const update=(userId,token,user)=>{\r\n    return fetch(`${API}/user/${userId}`,{\r\n        method: \"PUT\",\r\n        headers:{\r\n            Accept:'application/json',         \r\n            \"Content-Type\" : \"application/json\", \r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(user) \r\n    })\r\n    .then(response=>{\r\n        return response.json();\r\n    })\r\n    .catch(err=>console.log(err));\r\n};\r\n\r\n\r\n//update info in the localStorage then and there so that user does not need to signin again\r\nexport const updateUser=(user,next)=>{\r\n    if(typeof window!== 'undefined'){\r\n        if(localStorage.getItem('jwt')){\r\n            let auth=JSON.parse(localStorage.getItem('jwt'));\r\n            auth.user=user;\r\n            localStorage.setItem('jwt',JSON.stringify(auth));\r\n            next();\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\nexport const getPurchaseHistory=(userId,token)=>{\r\n    return fetch(`${API}/orders/by/user/${userId}`,{\r\n        method: \"GET\",\r\n        headers:{\r\n            Accept:'application/json',         \r\n            \"Content-Type\" : \"application/json\", \r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response=>{\r\n        return response.json();\r\n    })\r\n    .catch(err=>console.log(err));\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst purchaseHistory = history => {\r\n    return (\r\n        <div className=\"card mb-5\">\r\n            <h3 className=\"card-header\">Purchase history</h3>\r\n            <ul className=\"list-group\">\r\n                <li className=\"list-group-item\">\r\n                    {history.map((h, i) => {\r\n                        return (\r\n                            <div>\r\n                                <hr />\r\n                                {h.products.map((p, i) => {\r\n                                    return (\r\n                                        <div key={i}>\r\n                                            <h6>Product name: {p.name}</h6>\r\n                                            <h6>Product price: ${p.price}</h6>\r\n                                            <h6>\r\n                                                Purchased date:{\" \"}\r\n                                                {moment(p.createdAt).fromNow()}\r\n                                            </h6>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    );\r\n};"]},"metadata":{},"sourceType":"module"}