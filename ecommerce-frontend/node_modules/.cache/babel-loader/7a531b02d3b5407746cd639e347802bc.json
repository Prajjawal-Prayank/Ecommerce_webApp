{"ast":null,"code":"import{API}from'../config';export var read=function read(userId,token){return fetch(\"\".concat(API,\"/user/\").concat(userId),{method:\"GET\",headers:{Accept:'application/json',\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(function(response){return response.json();}).catch(function(err){return console.log(err);});};export var update=function update(userId,token,user){return fetch(\"\".concat(API,\"/user/\").concat(userId),{method:\"PUT\",headers:{Accept:'application/json',\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify(user)}).then(function(response){return response.json();}).catch(function(err){return console.log(err);});};//update info in the localStorage then and there so that user does not need to signin again\nexport var updateUser=function updateUser(user,next){if(typeof window!=='undefined'){if(localStorage.getItem('jwt')){var auth=JSON.parse(localStorage.getItem('jwt'));auth.user=user;localStorage.setItem('jwt',JSON.stringify(auth));next();}}};export var getPurchaseHistory=function getPurchaseHistory(userId,token){return fetch(\"\".concat(API,\"/orders/by/user/\").concat(userId),{method:\"GET\",headers:{Accept:'application/json',\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(function(response){return response.json();}).catch(function(err){return console.log(err);});};","map":{"version":3,"sources":["D:/B Tech/WebD/Ecommerce_webApp/ecommerce-frontend/src/user/apiUser.js"],"names":["API","read","userId","token","fetch","method","headers","Accept","Authorization","then","response","json","catch","err","console","log","update","user","body","JSON","stringify","updateUser","next","window","localStorage","getItem","auth","parse","setItem","getPurchaseHistory"],"mappings":"AAAA,OAAQA,GAAR,KAAkB,WAAlB,CAEA,MAAO,IAAMC,CAAAA,IAAI,CAAC,QAALA,CAAAA,IAAK,CAACC,MAAD,CAAQC,KAAR,CAAgB,CAC9B,MAAOC,CAAAA,KAAK,WAAIJ,GAAJ,kBAAgBE,MAAhB,EAAyB,CACjCG,MAAM,CAAE,KADyB,CAEjCC,OAAO,CAAC,CACJC,MAAM,CAAC,kBADH,CAEJ,eAAiB,kBAFb,CAGJC,aAAa,kBAAYL,KAAZ,CAHT,CAFyB,CAAzB,CAAL,CAQNM,IARM,CAQD,SAAAC,QAAQ,CAAE,CACZ,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CAVM,EAWNC,KAXM,CAWA,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAXH,CAAP,CAYH,CAbM,CAmBP,MAAO,IAAMG,CAAAA,MAAM,CAAC,QAAPA,CAAAA,MAAO,CAACd,MAAD,CAAQC,KAAR,CAAcc,IAAd,CAAqB,CACrC,MAAOb,CAAAA,KAAK,WAAIJ,GAAJ,kBAAgBE,MAAhB,EAAyB,CACjCG,MAAM,CAAE,KADyB,CAEjCC,OAAO,CAAC,CACJC,MAAM,CAAC,kBADH,CAEJ,eAAiB,kBAFb,CAGJC,aAAa,kBAAYL,KAAZ,CAHT,CAFyB,CAOjCe,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeH,IAAf,CAP2B,CAAzB,CAAL,CASNR,IATM,CASD,SAAAC,QAAQ,CAAE,CACZ,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CAXM,EAYNC,KAZM,CAYA,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAZH,CAAP,CAaH,CAdM,CAiBP;AACA,MAAO,IAAMQ,CAAAA,UAAU,CAAC,QAAXA,CAAAA,UAAW,CAACJ,IAAD,CAAMK,IAAN,CAAa,CACjC,GAAG,MAAOC,CAAAA,MAAP,GAAiB,WAApB,CAAgC,CAC5B,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAH,CAA+B,CAC3B,GAAIC,CAAAA,IAAI,CAACP,IAAI,CAACQ,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAX,CAAT,CACAC,IAAI,CAACT,IAAL,CAAUA,IAAV,CACAO,YAAY,CAACI,OAAb,CAAqB,KAArB,CAA2BT,IAAI,CAACC,SAAL,CAAeM,IAAf,CAA3B,EACAJ,IAAI,GACP,CACJ,CACJ,CATM,CAeP,MAAO,IAAMO,CAAAA,kBAAkB,CAAC,QAAnBA,CAAAA,kBAAmB,CAAC3B,MAAD,CAAQC,KAAR,CAAgB,CAC5C,MAAOC,CAAAA,KAAK,WAAIJ,GAAJ,4BAA0BE,MAA1B,EAAmC,CAC3CG,MAAM,CAAE,KADmC,CAE3CC,OAAO,CAAC,CACJC,MAAM,CAAC,kBADH,CAEJ,eAAiB,kBAFb,CAGJC,aAAa,kBAAYL,KAAZ,CAHT,CAFmC,CAAnC,CAAL,CAQNM,IARM,CAQD,SAAAC,QAAQ,CAAE,CACZ,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CAVM,EAWNC,KAXM,CAWA,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAXH,CAAP,CAYH,CAbM","sourcesContent":["import {API} from '../config';\r\n\r\nexport const read=(userId,token)=>{\r\n    return fetch(`${API}/user/${userId}`,{\r\n        method: \"GET\",\r\n        headers:{\r\n            Accept:'application/json',         \r\n            \"Content-Type\" : \"application/json\", \r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response=>{\r\n        return response.json();\r\n    })\r\n    .catch(err=>console.log(err));\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const update=(userId,token,user)=>{\r\n    return fetch(`${API}/user/${userId}`,{\r\n        method: \"PUT\",\r\n        headers:{\r\n            Accept:'application/json',         \r\n            \"Content-Type\" : \"application/json\", \r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(user) \r\n    })\r\n    .then(response=>{\r\n        return response.json();\r\n    })\r\n    .catch(err=>console.log(err));\r\n};\r\n\r\n\r\n//update info in the localStorage then and there so that user does not need to signin again\r\nexport const updateUser=(user,next)=>{\r\n    if(typeof window!== 'undefined'){\r\n        if(localStorage.getItem('jwt')){\r\n            let auth=JSON.parse(localStorage.getItem('jwt'));\r\n            auth.user=user;\r\n            localStorage.setItem('jwt',JSON.stringify(auth));\r\n            next();\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\nexport const getPurchaseHistory=(userId,token)=>{\r\n    return fetch(`${API}/orders/by/user/${userId}`,{\r\n        method: \"GET\",\r\n        headers:{\r\n            Accept:'application/json',         \r\n            \"Content-Type\" : \"application/json\", \r\n            Authorization: `Bearer ${token}`\r\n        },\r\n    })\r\n    .then(response=>{\r\n        return response.json();\r\n    })\r\n    .catch(err=>console.log(err));\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}