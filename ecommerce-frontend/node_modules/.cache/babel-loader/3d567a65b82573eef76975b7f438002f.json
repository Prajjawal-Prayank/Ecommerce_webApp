{"ast":null,"code":"import _slicedToArray from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Layout from'../core/Layout';import{isAuthenticated}from'../auth';import{listOrders,getStatusValues,updateOrderStatus}from'./apiAdmin';import moment from'moment';import{Accordion,Card}from'react-bootstrap';var Orders=function Orders(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),statusValues=_useState4[0],setStatusValues=_useState4[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var loadOrders=function loadOrders(){listOrders(user._id,token).then(function(data){if(data.error){console.log(data.error);}else{setOrders(data);}});};var loadStatusValues=function loadStatusValues(){getStatusValues(user._id,token).then(function(data){if(data.error){console.log(data.error);}else{setStatusValues(data);}});};useEffect(function(){loadOrders();loadStatusValues();},[]);var handleChangeStatus=function handleChangeStatus(e,orderId){updateOrderStatus(user._id,token,orderId,e.target.value).then(function(data){if(data.error){console.log(\"Failure in status updation\");}else{loadOrders();}});};var showStatus=function showStatus(o){return/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"mark mb-4\"},\"Status :  \",o.status),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",onChange:function onChange(e){return handleChangeStatus(e,o._id);}},/*#__PURE__*/React.createElement(\"option\",null,\"Update Status\"),statusValues.map(function(status,idx){return/*#__PURE__*/React.createElement(\"option\",{key:idx,value:status},status);})));};var showOrdersLength=function showOrdersLength(){return orders.length>0?/*#__PURE__*/React.createElement(\"h1\",{className:\"text-danger \"},\"Total Orders : \",orders.length):/*#__PURE__*/React.createElement(\"h1\",{className:\"text-danger text-muted\"},\"No Orders to display...\");};var showInput=function showInput(key,value){return/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2 mr-sm-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"b\",null,key),\" \")),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:value,key:\"key+value\",className:\"form-control\",readOnly:true}));};var accordion=function accordion(){return/*#__PURE__*/React.createElement(Accordion,null,orders.map(function(order,i){return/*#__PURE__*/React.createElement(Card,{key:i},/*#__PURE__*/React.createElement(Accordion.Toggle,{as:Card.Header,eventKey:i},/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Order Id :-\"),\"  \",order._id)),/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:i},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group mb-2\"},/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\",key:\"\".concat(order._id,\"+\").concat(i)},/*#__PURE__*/React.createElement(\"b\",null,\"Status :- \"),showStatus(order)),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\",key:\"\".concat(order.transaction_Id,\"+\").concat(i)},/*#__PURE__*/React.createElement(\"b\",null,\"TransactionId :- \"),order.transaction_Id),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\",key:\"\".concat(order.amount,\"+\").concat(i)},/*#__PURE__*/React.createElement(\"b\",null,\"Amount :- \"),\"Rs \",order.amount),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\",key:\"\".concat(order.user.name,\"+\").concat(i)},/*#__PURE__*/React.createElement(\"b\",null,\"Ordered by :- \"),order.user.name),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\",key:\"\".concat(order.createdAt,\"+\").concat(i)},/*#__PURE__*/React.createElement(\"b\",null,\"Ordered on :- \"),moment(order.createdAt).fromNow()),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item\",key:\"\".concat(order.address,\"+\").concat(i)},/*#__PURE__*/React.createElement(\"b\",null,\"Delivery address :- \"),order.address)),/*#__PURE__*/React.createElement(\"h3\",{className:\"mt-4 mb-4 font-italic\"},\"Total products in the order : \",order.products.length),/*#__PURE__*/React.createElement(\"ul\",null,order.products.map(function(p,idx){return/*#__PURE__*/React.createElement(\"div\",{className:\"mb-4\",key:idx,style:{padding:'20px',border:'1px solid indigo'}},showInput('Product name',p.name),showInput('Product price',p.price),showInput('Product total',p.count),showInput('Product id',p._id));})))));}));};return/*#__PURE__*/React.createElement(Layout,{title:\"Orders\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 offset-md-2\"},showOrdersLength(),accordion())));};export default Orders;","map":{"version":3,"sources":["D:/B Tech/WebD/Ecommerce_webApp/ecommerce-frontend/src/admin/Orders.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","listOrders","getStatusValues","updateOrderStatus","moment","Accordion","Card","Orders","orders","setOrders","statusValues","setStatusValues","user","token","loadOrders","_id","then","data","error","console","log","loadStatusValues","handleChangeStatus","e","orderId","target","value","showStatus","o","status","map","idx","showOrdersLength","length","showInput","key","accordion","order","i","Header","transaction_Id","amount","name","createdAt","fromNow","address","products","p","padding","border","price","count"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport Layout from '../core/Layout';\r\nimport {isAuthenticated} from '../auth';\r\nimport {listOrders,getStatusValues,updateOrderStatus} from './apiAdmin';\r\nimport moment from 'moment';\r\nimport {Accordion,Card} from 'react-bootstrap';\r\n\r\n\r\n\r\nconst Orders=()=>{\r\n    const [orders,setOrders]=useState([]);\r\n    const [statusValues,setStatusValues]=useState([]);\r\n\r\n    const {user,token}=isAuthenticated();\r\n\r\n    const loadOrders=()=>{\r\n        listOrders(user._id,token)\r\n            .then(data=>{\r\n                if(data.error){\r\n                    console.log(data.error);\r\n                }else{\r\n                    setOrders(data);\r\n                }\r\n            });\r\n    };\r\n\r\n\r\n    const loadStatusValues=()=>{\r\n        getStatusValues(user._id,token)\r\n            .then(data=>{ \r\n                if(data.error){\r\n                    console.log(data.error);\r\n                }else{\r\n                    setStatusValues(data);  \r\n                }\r\n            })\r\n    };\r\n\r\n    useEffect(()=>{\r\n        loadOrders();\r\n        loadStatusValues();\r\n    },[]);\r\n\r\n\r\n    const handleChangeStatus=(e,orderId)=>{\r\n        updateOrderStatus(user._id,token,orderId,e.target.value)\r\n            .then(data=>{ \r\n                if(data.error){\r\n                    console.log(\"Failure in status updation\");\r\n                }else{\r\n                    loadOrders();\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n    const showStatus=o=>(\r\n        <div className=\"form-group\">\r\n            <h3 className=\"mark mb-4\">Status :  {o.status}</h3>\r\n            <select className=\"form-control\" onChange={e=>handleChangeStatus(e,o._id)}>\r\n                <option>Update Status</option>\r\n                {statusValues.map((status,idx)=>(\r\n                    <option key={idx} value={status}>{status}</option>\r\n                ))}\r\n            </select> \r\n        </div>\r\n    )\r\n\r\n\r\n    const showOrdersLength=()=>(\r\n        orders.length>0? (\r\n            <h1 className=\"text-danger \">\r\n                Total Orders : {orders.length} \r\n            </h1>\r\n        ):(\r\n            <h1 className=\"text-danger text-muted\">\r\n                No Orders to display...\r\n            </h1>\r\n        )\r\n    );\r\n\r\n\r\n    const showInput=(key,value)=>(\r\n        <div className=\"input-group mb-2 mr-sm-2\">\r\n            <div className=\"input-group-prepend\">\r\n                <div className=\"input-group-text\"><b>{key}</b> </div>\r\n            </div>\r\n            <input type=\"text\" value={value} key={`key+value`} className=\"form-control\" readOnly />\r\n        </div>\r\n    )\r\n\r\n    \r\n\r\n\r\n\r\n    const accordion=()=>{\r\n        return (\r\n                <Accordion>\r\n                    {orders.map((order,i)=>(\r\n                        <Card key={i}>\r\n                            <Accordion.Toggle as={Card.Header} eventKey={i}>\r\n                                <center><b>Order Id :-</b>  {order._id}</center>\r\n                            </Accordion.Toggle>\r\n                            <Accordion.Collapse eventKey={i}>\r\n                                <Card.Body> \r\n                                    <ul className=\"list-group mb-2\">\r\n                                        <li className=\"list-group-item\" key={`${order._id}+${i}`}><b>Status :- </b>{showStatus(order)}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.transaction_Id}+${i}`}><b>TransactionId :- </b>{order.transaction_Id}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.amount}+${i}`}><b>Amount :- </b>Rs {order.amount}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.user.name}+${i}`}><b>Ordered by :- </b>{order.user.name}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.createdAt}+${i}`}><b>Ordered on :- </b>{moment(order.createdAt).fromNow()}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.address}+${i}`}><b>Delivery address :- </b>{order.address}</li>\r\n                                    </ul>\r\n                                    \r\n                                    <h3 className=\"mt-4 mb-4 font-italic\">\r\n                                        Total products in the order : {order.products.length}\r\n                                    </h3>\r\n                                    <ul>\r\n                                        {order.products.map((p,idx)=>(\r\n                                            <div className=\"mb-4\" key={idx} style={{padding:'20px',border:'1px solid indigo'}}>\r\n                                                {showInput('Product name',p.name)}\r\n                                                {showInput('Product price',p.price)}\r\n                                                {showInput('Product total',p.count)}\r\n                                                {showInput('Product id',p._id)}\r\n                                            </div>\r\n                                        ))}\r\n                                    </ul>    \r\n                                </Card.Body>\r\n                            </Accordion.Collapse> \r\n                        </Card>           \r\n                    ))}\r\n                </Accordion>    \r\n            );\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <Layout title=\"Orders\"  >\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showOrdersLength()}  \r\n                    {accordion()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n\r\n}\r\n\r\nexport default Orders;          "]},"metadata":{},"sourceType":"module"}