{"ast":null,"code":"import _objectSpread from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Layout from'./Layout';import Card from'./Card';import{getCategories,getFilteredProducts}from'./apiCore';import Checkbox from'./Checkbox';import{prices}from'./fixedPrices';import RadioBox from'./RadioBox';var Shop=function Shop(){var _useState=useState({filters:{category:[],price:[]}}),_useState2=_slicedToArray(_useState,2),myFilters=_useState2[0],setMyFilters=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(6),_useState8=_slicedToArray(_useState7,2),limit=_useState8[0],setLimit=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),skip=_useState10[0],setSkip=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),size=_useState12[0],setSize=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),filteredResults=_useState14[0],setFilteredResults=_useState14[1];var init=function init(){getCategories().then(function(data){if(data.error){setError(data.error);}else{setCategories(data);}});};var loadFilteredResults=function loadFilteredResults(newFilters){getFilteredProducts(skip,limit,newFilters).then(function(data){if(data.error){setError(data.error);}else{setFilteredResults(data.data);setSize(data.size);setSkip(0);}});};var loadMore=function loadMore(){var toSkip=skip+limit;getFilteredProducts(toSkip,limit,myFilters.filters).then(function(data){if(data.error){setError(data.error);}else{setFilteredResults([].concat(_toConsumableArray(filteredResults),_toConsumableArray(data.data)));//we append the new data we receive to the data we already had\nsetSize(data.size);setSkip(toSkip);}});};var loadMoreButton=function loadMoreButton(){return size>0&&size>=limit&&/*#__PURE__*/React.createElement(\"button\",{onClick:loadMore,className:\"btn btn-warning mb-5\"},\"Load more\");};useEffect(function(){init();loadFilteredResults(skip,limit,myFilters.filters);},[]);var _handleFilters=function handleFilters(filters,filterBy){var newFilters=_objectSpread({},myFilters);newFilters.filters[filterBy]=filters;if(filterBy==='price'){var priceValues=handlePrice(filters);newFilters.filters[filterBy]=priceValues;}loadFilteredResults(myFilters.filters);setMyFilters(newFilters);};var handlePrice=function handlePrice(value){var data=prices;var array=[];for(var key in data){if(data[key]._id===parseInt(value)){array=data[key].array;}}return array;};var showEmpty=function showEmpty(){return/*#__PURE__*/React.createElement(\"h2\",{className:\"text-muted\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:!size?'':'none'}},\"No products found in this filter. Try out some other filter options .\"));};return/*#__PURE__*/React.createElement(Layout,{title:\"Welcome!\",description:\"Be a Shopaholic! Now choose from a wide variety of products.\",className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},categories.length>0?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Filter by categories\"),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(Checkbox,{categories:categories,handleFilters:function handleFilters(filters){return _handleFilters(filters,'category');}}))):null,/*#__PURE__*/React.createElement(\"h4\",null,\"Filter by price\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(RadioBox,{prices:prices,handleFilters:function handleFilters(filters){return _handleFilters(filters,'price');}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-8\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mb-4-\"},\"Products\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},filteredResults.length>0?filteredResults.map(function(product,i){return/*#__PURE__*/React.createElement(Card,{key:i,product:product});}):\" \"),/*#__PURE__*/React.createElement(\"br\",null),showEmpty(),loadMoreButton())));};export default Shop;","map":{"version":3,"sources":["D:/B Tech/WebD/Ecommerce_webApp/ecommerce-frontend/src/core/Shop.js"],"names":["React","useState","useEffect","Layout","Card","getCategories","getFilteredProducts","Checkbox","prices","RadioBox","Shop","filters","category","price","myFilters","setMyFilters","categories","setCategories","error","setError","limit","setLimit","skip","setSkip","size","setSize","filteredResults","setFilteredResults","init","then","data","loadFilteredResults","newFilters","loadMore","toSkip","loadMoreButton","handleFilters","filterBy","priceValues","handlePrice","value","array","key","_id","parseInt","showEmpty","display","length","map","product","i"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport Layout from './Layout';\r\nimport Card from './Card';\r\nimport {getCategories,getFilteredProducts} from './apiCore';\r\nimport Checkbox from './Checkbox';\r\nimport {prices} from './fixedPrices';\r\nimport RadioBox from './RadioBox';\r\n\r\nconst Shop=()=>{\r\n\r\n    const [myFilters,setMyFilters]=useState({\r\n        filters:{category:[],price:[]}\r\n    })\r\n    const [categories,setCategories]=useState([]);\r\n    const [error,setError]=useState(false);\r\n    const [limit,setLimit]=useState(6);\r\n    const [skip,setSkip]=useState(0);\r\n    const [size,setSize]=useState(0);\r\n    const [filteredResults,setFilteredResults]=useState(0);\r\n\r\n    const init=()=>{\r\n        getCategories()\r\n        .then(data=>{\r\n            if(data.error){\r\n                setError(data.error)\r\n            }else{       \r\n                setCategories(data);               \r\n            }\r\n        })\r\n    };\r\n\r\n    const loadFilteredResults=(newFilters)=>{\r\n        getFilteredProducts(skip,limit,newFilters)\r\n        .then(data=>{\r\n            if(data.error){\r\n                setError(data.error)\r\n            }else{       \r\n                setFilteredResults(data.data);      \r\n                setSize(data.size);\r\n                setSkip(0);         \r\n            }\r\n        })\r\n    };\r\n\r\n\r\n    const loadMore=()=>{\r\n        let toSkip=skip+limit;\r\n        getFilteredProducts(toSkip,limit,myFilters.filters)\r\n        .then(data=>{\r\n            if(data.error){\r\n                setError(data.error)\r\n            }else{       \r\n                setFilteredResults([...filteredResults,...data.data]);      \r\n                    //we append the new data we receive to the data we already had\r\n                setSize(data.size);\r\n                setSkip(toSkip);         \r\n            }\r\n        })\r\n    };\r\n\r\n\r\n    const loadMoreButton=()=>{\r\n        return (\r\n            size>0 && size>=limit && (\r\n                <button onClick={loadMore} className=\"btn btn-warning mb-5\">\r\n                    Load more\r\n                </button>\r\n            )\r\n        )\r\n    }\r\n\r\n    useEffect(()=>{\r\n        init();\r\n        loadFilteredResults(skip,limit,myFilters.filters);\r\n    },[]);\r\n\r\n\r\n    const handleFilters=(filters,filterBy)=>{\r\n        const newFilters={...myFilters};    \r\n        newFilters.filters[filterBy]=filters;\r\n\r\n        if(filterBy==='price'){\r\n            let priceValues=handlePrice(filters);\r\n            newFilters.filters[filterBy]=priceValues;\r\n        }\r\n\r\n        loadFilteredResults(myFilters.filters);\r\n\r\n        setMyFilters(newFilters);\r\n    }\r\n\r\n    const handlePrice=value=>{\r\n        const data=prices;\r\n        let array=[]\r\n        for(let key in data){\r\n            if(data[key]._id===parseInt(value)){\r\n                array=data[key].array;\r\n            }\r\n        }\r\n        return array;\r\n    }\r\n\r\n    const showEmpty=()=>{\r\n        return (\r\n            <h2 className=\"text-muted\">\r\n                <div style={{display:(!size)?'':'none'}}>\r\n                        No products found in this filter. Try out some other filter options .\r\n                </div>\r\n            </h2>\r\n        )\r\n    }\r\n\r\n    \r\n    \r\n\r\n    return (\r\n        <Layout title='Welcome!' \r\n            description='Be a Shopaholic! Now choose from a wide variety of products.' \r\n            className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-4\">\r\n                    {categories.length>0?(<div>\r\n                    <h4>Filter by categories</h4>\r\n                    <ul>\r\n                        <Checkbox categories={categories} \r\n                            handleFilters={filters=>handleFilters(filters,'category')} />\r\n                    </ul></div>):null}\r\n                    <h4>Filter by price</h4>\r\n                    <div>\r\n                        <RadioBox prices={prices} \r\n                            handleFilters={filters=>handleFilters(filters,'price')} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-8\">\r\n                    <h2 className=\"mb-4-\">Products</h2>\r\n                    <div className=\"row\">  \r\n                        {filteredResults.length>0 ? filteredResults.map((product,i)=>\r\n                            <Card key={i} product={product} />                             \r\n                        ) : \" \"\r\n                        }\r\n                    </div>\r\n                    <br></br>\r\n                    {showEmpty()}\r\n                    {loadMoreButton()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\n\r\nexport default Shop;             "]},"metadata":{},"sourceType":"module"}