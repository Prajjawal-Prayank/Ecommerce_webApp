{"ast":null,"code":"import _defineProperty from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Redirect}from'react-router-dom';import Layout from'../core/Layout';import{signin,aurhenticate,isAuthenticated}from'../auth';//since signin() is in \"index.js\" ,we don't specifically need to write that file's name. \nvar Signin=function Signin(){var _useState=useState({email:\"\",password:\"\",error:\"\",loading:false,redirectToReferrer:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var email=values.email,password=values.password,loading=values.loading,error=values.error,redirectToReferrer=values.redirectToReferrer;var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user;//wherever we define variables like this, we are using it as a destructor.\n//higher order function\nvar handleChange=function handleChange(name){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},name,event.target.value)));//... is aka rest operator\n//so it takes the rest of the values\n};};var clickSubmit=function clickSubmit(event){event.preventDefault();//this is done to prevent Default action on clicking button.\n//The default action is that the page gets reloaded   \nsetValues(_objectSpread(_objectSpread({},values),{},{error:false,loading:true}));signin({email:email,password:password})//since the key and value are same in name:name,email:email,password:password ,so\n//we write this way\n.then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{password:'',error:data.error,loading:false}));}else{aurhenticate(data,function(){//checks for info in LocalStorage\nsetValues(_objectSpread(_objectSpread({},values),{},{redirectToReferrer:true}));});}});};var signInForm=function signInForm(){return/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('email'),type:\"email\",className:\"form-control\",value:email})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('password'),type:\"password\",className:\"form-control\",value:password})),/*#__PURE__*/React.createElement(\"button\",{onClick:clickSubmit,className:\"btn btn-primary\"},\"Submit\"));};var showError=function showError(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},error);};//curly braces were not used in this function. So, () is used.No return () statement.\nvar showLoading=function showLoading(){return loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Loading...\"));};var redirectUser=function redirectUser(){if(redirectToReferrer){if(user&&user.role===1){return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin/dashboard\"});}else{return/*#__PURE__*/React.createElement(Redirect,{to:\"/user/dashboard\"});}}if(isAuthenticated()){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}};return/*#__PURE__*/ (//curly braces were used in this function. So, return() is used.\nReact.createElement(Layout,{title:\"Signin\",description:\"Signup to E-commerce App\",className:\"container col-md-6 offset-md-2\"},showError(),showLoading(),signInForm(),redirectUser()));};export default Signin;","map":{"version":3,"sources":["D:/B Tech/WebD/Ecommerce_webApp/ecommerce-frontend/src/user/Signin.js"],"names":["React","useState","Redirect","Layout","signin","aurhenticate","isAuthenticated","Signin","email","password","error","loading","redirectToReferrer","values","setValues","user","handleChange","name","event","target","value","clickSubmit","preventDefault","then","data","signInForm","showError","display","showLoading","redirectUser","role"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\r\nimport { Redirect} from 'react-router-dom';\r\nimport Layout from '../core/Layout';\r\nimport {signin,aurhenticate,isAuthenticated} from '../auth';\r\n    //since signin() is in \"index.js\" ,we don't specifically need to write that file's name. \r\n\r\nconst Signin=()=> {\r\n    const [values,setValues]=useState({\r\n        email:\"\",\r\n        password:\"\",\r\n        error:\"\",\r\n        loading:false,\r\n        redirectToReferrer:false\r\n    });\r\n\r\n    const {email,password,loading,error,redirectToReferrer}=values;\r\n    const {user}=isAuthenticated();\r\n    //wherever we define variables like this, we are using it as a destructor.\r\n\r\n    //higher order function\r\n    const handleChange=name=>event=>{\r\n        setValues({...values,error:false, [name]:event.target.value});  //... is aka rest operator\r\n                                                                    //so it takes the rest of the values\r\n    };\r\n\r\n    \r\n\r\n    const clickSubmit=(event)=>{\r\n        event.preventDefault(); //this is done to prevent Default action on clicking button.\r\n                                //The default action is that the page gets reloaded   \r\n        setValues({...values,error:false,loading:true});\r\n        signin({email,password})\r\n            //since the key and value are same in name:name,email:email,password:password ,so\r\n            //we write this way\r\n            .then(data=>{ \r\n                if(data.error){\r\n                    setValues({...values,password:'',error: data.error, loading:false,});\r\n                }else{\r\n                    aurhenticate(data,()=>{     //checks for info in LocalStorage\r\n                        setValues({...values,\r\n                            redirectToReferrer:true\r\n                        });\r\n                    })\r\n                }\r\n            });    \r\n    };\r\n\r\n    const signInForm=()=>(\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\" className=\"form-control\" value={email}/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\" className=\"form-control\" value={password}/>\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n                Submit\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    const showError=()=>(\r\n        <div className=\"alert alert-danger\" style={{display:error?'':'none'}}>\r\n            {error}\r\n        </div>\r\n    );\r\n    //curly braces were not used in this function. So, () is used.No return () statement.\r\n\r\n\r\n    const showLoading=()=>(\r\n        loading && (\r\n            <div className=\"alert alert-info\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        )\r\n    );\r\n\r\n    const redirectUser=()=>{\r\n        if(redirectToReferrer){\r\n            if(user && user.role===1){\r\n                return <Redirect to='/admin/dashboard' />;\r\n            }else{\r\n                return <Redirect to='/user/dashboard' />;\r\n            }\r\n        }\r\n        if(isAuthenticated()){\r\n            return <Redirect to='/' />;\r\n        }\r\n    };\r\n\r\n    return(     //curly braces were used in this function. So, return() is used.\r\n        <Layout title='Signin' description='Signup to E-commerce App' \r\n        className=\"container col-md-6 offset-md-2\">\r\n            {showError()}\r\n            {showLoading()}\r\n            {signInForm()}\r\n            {redirectUser()}\r\n        </Layout>\r\n    );\r\n};\r\n\r\n\r\nexport default Signin;"]},"metadata":{},"sourceType":"module"}