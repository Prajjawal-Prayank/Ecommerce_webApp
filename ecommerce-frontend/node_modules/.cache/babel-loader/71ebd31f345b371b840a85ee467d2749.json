{"ast":null,"code":"var _jsxFileName = \"D:\\\\B Tech\\\\WebD\\\\ecommerce-frontend\\\\src\\\\admin\\\\Orders.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Layout from '../core/Layout';\nimport { isAuthenticated } from '../auth';\nimport { listOrders, getStatusValues, updateOrderStatus } from './apiAdmin';\nimport moment from 'moment';\nimport { Accordion, Card } from 'react-bootstrap';\n\nconst Orders = () => {\n  const [orders, setOrders] = useState([]);\n  const [statusValues, setStatusValues] = useState([]);\n  const {\n    user,\n    token\n  } = isAuthenticated();\n\n  const loadOrders = () => {\n    listOrders(user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setOrders(data);\n      }\n    });\n  };\n\n  const loadStatusValues = () => {\n    getStatusValues(user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setStatusValues(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadOrders();\n    loadStatusValues();\n  }, []);\n\n  const handleChangeStatus = (e, orderId) => {\n    updateOrderStatus(user._id, token, orderId, e.target.value).then(data => {\n      if (data.error) {\n        console.log(\"Failure in status updation\");\n      } else {\n        loadOrders();\n      }\n    });\n  };\n\n  const showStatus = o => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"mark mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"Status :  \", o.status), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    onChange: e => handleChangeStatus(e, o._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Update Status\"), statusValues.map((status, idx) => /*#__PURE__*/React.createElement(\"option\", {\n    key: idx,\n    value: status,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, status))));\n\n  const showOrdersLength = () => orders.length > 0 ? /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-danger \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Total Orders : \", orders.length) : /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-danger text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, \"No Orders to display...\");\n\n  const showInput = (key, value) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group mb-2 mr-sm-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 51\n    }\n  }, key), \" \")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: value,\n    key: `key+value`,\n    className: \"form-control\",\n    readOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }));\n\n  const accordion = () => {\n    return /*#__PURE__*/React.createElement(Accordion, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, orders.map((order, i) => /*#__PURE__*/React.createElement(Card, {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Accordion.Toggle, {\n      as: Card.Header,\n      eventKey: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 41\n      }\n    }, \"Order Id :-\"), \"  \", order._id)), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n      eventKey: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"list-group mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      key: `${order._id}+${i}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 99\n      }\n    }, \"Status :- \"), showStatus(order)), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      key: `${order.transaction_Id}+${i}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 110\n      }\n    }, \"TransactionId :- \"), order.transaction_Id), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      key: `${order.amount}+${i}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 102\n      }\n    }, \"Amount :- \"), \"Rs \", order.amount), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      key: `${order.user.name}+${i}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 105\n      }\n    }, \"Ordered by :- \"), order.user.name), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      key: `${order.createdAt}+${i}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 105\n      }\n    }, \"Ordered on :- \"), moment(order.createdAt).fromNow()), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      key: `${order.address}+${i}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 103\n      }\n    }, \"Delivery address :- \"), order.address)), /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"mt-4 mb-4 font-italic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 37\n      }\n    }, \"Total products in the order : \", order.products.length), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 37\n      }\n    }, order.products.map((p, idx) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mb-4\",\n      key: idx,\n      style: {\n        padding: '20px',\n        border: '1px solid indigo'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 45\n      }\n    }, showInput('Product name', p.name), showInput('Product price', p.price), showInput('Product total', p.count), showInput('Product id', p._id)))))))));\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"Orders\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, showOrdersLength(), accordion())));\n};\n\nexport default Orders;","map":{"version":3,"sources":["D:/B Tech/WebD/ecommerce-frontend/src/admin/Orders.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","listOrders","getStatusValues","updateOrderStatus","moment","Accordion","Card","Orders","orders","setOrders","statusValues","setStatusValues","user","token","loadOrders","_id","then","data","error","console","log","loadStatusValues","handleChangeStatus","e","orderId","target","value","showStatus","o","status","map","idx","showOrdersLength","length","showInput","key","accordion","order","i","Header","transaction_Id","amount","name","createdAt","fromNow","address","products","p","padding","border","price","count"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport Layout from '../core/Layout';\r\nimport {isAuthenticated} from '../auth';\r\nimport {listOrders,getStatusValues,updateOrderStatus} from './apiAdmin';\r\nimport moment from 'moment';\r\nimport {Accordion,Card} from 'react-bootstrap';\r\n\r\n\r\n\r\nconst Orders=()=>{\r\n    const [orders,setOrders]=useState([]);\r\n    const [statusValues,setStatusValues]=useState([]);\r\n\r\n    const {user,token}=isAuthenticated();\r\n\r\n    const loadOrders=()=>{\r\n        listOrders(user._id,token)\r\n            .then(data=>{\r\n                if(data.error){\r\n                    console.log(data.error);\r\n                }else{\r\n                    setOrders(data);\r\n                }\r\n            });\r\n    };\r\n\r\n\r\n    const loadStatusValues=()=>{\r\n        getStatusValues(user._id,token)\r\n            .then(data=>{ \r\n                if(data.error){\r\n                    console.log(data.error);\r\n                }else{\r\n                    setStatusValues(data);  \r\n                }\r\n            })\r\n    };\r\n\r\n    useEffect(()=>{\r\n        loadOrders();\r\n        loadStatusValues();\r\n    },[]);\r\n\r\n\r\n    const handleChangeStatus=(e,orderId)=>{\r\n        updateOrderStatus(user._id,token,orderId,e.target.value)\r\n            .then(data=>{ \r\n                if(data.error){\r\n                    console.log(\"Failure in status updation\");\r\n                }else{\r\n                    loadOrders();\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n    const showStatus=o=>(\r\n        <div className=\"form-group\">\r\n            <h3 className=\"mark mb-4\">Status :  {o.status}</h3>\r\n            <select className=\"form-control\" onChange={e=>handleChangeStatus(e,o._id)}>\r\n                <option>Update Status</option>\r\n                {statusValues.map((status,idx)=>(\r\n                    <option key={idx} value={status}>{status}</option>\r\n                ))}\r\n            </select> \r\n        </div>\r\n    )\r\n\r\n\r\n    const showOrdersLength=()=>(\r\n        orders.length>0? (\r\n            <h1 className=\"text-danger \">\r\n                Total Orders : {orders.length} \r\n            </h1>\r\n        ):(\r\n            <h1 className=\"text-danger text-muted\">\r\n                No Orders to display...\r\n            </h1>\r\n        )\r\n    );\r\n\r\n\r\n    const showInput=(key,value)=>(\r\n        <div className=\"input-group mb-2 mr-sm-2\">\r\n            <div className=\"input-group-prepend\">\r\n                <div className=\"input-group-text\"><b>{key}</b> </div>\r\n            </div>\r\n            <input type=\"text\" value={value} key={`key+value`} className=\"form-control\" readOnly />\r\n        </div>\r\n    )\r\n\r\n    \r\n\r\n\r\n\r\n    const accordion=()=>{\r\n        return (\r\n                <Accordion>\r\n                    {orders.map((order,i)=>(\r\n                        <Card key={i}>\r\n                            <Accordion.Toggle as={Card.Header} eventKey={i}>\r\n                                <center><b>Order Id :-</b>  {order._id}</center>\r\n                            </Accordion.Toggle>\r\n                            <Accordion.Collapse eventKey={i}>\r\n                                <Card.Body> \r\n                                    <ul className=\"list-group mb-2\">\r\n                                        <li className=\"list-group-item\" key={`${order._id}+${i}`}><b>Status :- </b>{showStatus(order)}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.transaction_Id}+${i}`}><b>TransactionId :- </b>{order.transaction_Id}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.amount}+${i}`}><b>Amount :- </b>Rs {order.amount}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.user.name}+${i}`}><b>Ordered by :- </b>{order.user.name}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.createdAt}+${i}`}><b>Ordered on :- </b>{moment(order.createdAt).fromNow()}</li>\r\n                                        <li className=\"list-group-item\" key={`${order.address}+${i}`}><b>Delivery address :- </b>{order.address}</li>\r\n                                    </ul>\r\n                                    \r\n                                    <h3 className=\"mt-4 mb-4 font-italic\">\r\n                                        Total products in the order : {order.products.length}\r\n                                    </h3>\r\n                                    <ul>\r\n                                        {order.products.map((p,idx)=>(\r\n                                            <div className=\"mb-4\" key={idx} style={{padding:'20px',border:'1px solid indigo'}}>\r\n                                                {showInput('Product name',p.name)}\r\n                                                {showInput('Product price',p.price)}\r\n                                                {showInput('Product total',p.count)}\r\n                                                {showInput('Product id',p._id)}\r\n                                            </div>\r\n                                        ))}\r\n                                    </ul>    \r\n                                </Card.Body>\r\n                            </Accordion.Collapse> \r\n                        </Card>           \r\n                    ))}\r\n                </Accordion>    \r\n            );\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <Layout title=\"Orders\"  >\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showOrdersLength()}  \r\n                    {accordion()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n\r\n}\r\n\r\nexport default Orders;          "]},"metadata":{},"sourceType":"module"}