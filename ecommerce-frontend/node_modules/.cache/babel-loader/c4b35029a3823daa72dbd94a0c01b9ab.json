{"ast":null,"code":"import _slicedToArray from\"D:\\\\B Tech\\\\WebD\\\\Ecommerce_webApp\\\\ecommerce-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Redirect}from'react-router-dom';import Layout from'./Layout';import{read,listRelated}from'./apiCore';import Card from'./Card';import ShowImage from'./ShowImage';import{addItem}from'./cartHelpers';import moment from'moment';import'../styles.css';var Product=function Product(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),relatedProduct=_useState6[0],setRelatedProduct=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),currentURL=_useState8[0],setURL=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),redirect=_useState10[0],setRedirect=_useState10[1];var loadSingleProduct=function loadSingleProduct(productId){read(productId).then(function(data){if(data.error){setError(data.error);}else{setProduct(data);//fetching the related products (based on category)\nlistRelated(data._id).then(function(products){if(products.error){setError(products.error);}else{setRelatedProduct(products);}});}});};useEffect(function(){var productId=props.match.params.productId;//props object is provided by react-router-dom\n//we are extracting productId FROM URL at the time the Product component is mounted. This \n//is because we want to display all the info as soon as the page loads.\nloadSingleProduct(productId);},[props]);//specifyin \"props\" here means that whenever there is a change in props object\n//useEffect will run again.This helps in rendering the next item in related proucts.\nvar addToCart=function addToCart(){addItem(product,function(){setRedirect(true);});};var shouldRedirect=function shouldRedirect(redirect){if(redirect){return/*#__PURE__*/React.createElement(Redirect,{to:\"/cart\"});}};var showAddToCartButton=function showAddToCartButton(quantity){return quantity>0?/*#__PURE__*/React.createElement(\"button\",{onClick:addToCart,className:\"btn btn-outline-warning mt-2 mb-2\"},\"Add to Cart\"):/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-warning mt-2 mb-2\",disabled:true},\"Add to Cart\");};var showStock=function showStock(quantity){return quantity>0?quantity<5?/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-warning badge-pill\"},\"Only \",quantity,\" pieces left.Hurry..! Order Now.\"):/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-primary badge-pill\"},\"In Stock\"):/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-danger badge-pill\"},\"Out of Stock\");};var showRelatedProductsHeader=function showRelatedProductsHeader(){return relatedProduct.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"mt-4\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Related Products\")):/*#__PURE__*/React.createElement(\"div\",null);};return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundImage:\"linear-gradient(rgba(0,0,0,0.1),rgba(0,0,0,0.1))\"}},/*#__PURE__*/React.createElement(Layout,{title:product&&product.name,description:product&&product.category&&product.category.name,className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mt-10\"},/*#__PURE__*/React.createElement(ShowImage,{item:product,url:\"product\"})),shouldRedirect(redirect),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 \",style:{margin:\"30px\",whiteSpace:\"pre-wrap\",marginRight:\"40\"}},/*#__PURE__*/React.createElement(\"h2\",null,\"Description\"),/*#__PURE__*/React.createElement(\"p\",{className:\"lead\"},product.description),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h6\",{style:{display:\"inline-block\"}},\"Price :  \"),/*#__PURE__*/React.createElement(\"h5\",{style:{display:\"inline-block\"}},\"Rs \"+product.price)),/*#__PURE__*/React.createElement(\"div\",null,\"Added \",moment(product.createdAt).fromNow(),\"...\"),/*#__PURE__*/React.createElement(\"p\",null,showStock(product.quantity)),/*#__PURE__*/React.createElement(\"p\",null,showAddToCartButton(product.quantity)))),showRelatedProductsHeader(),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid testimonial-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center flex-nowrap\"},relatedProduct&&relatedProduct.map(function(product,i){return/*#__PURE__*/React.createElement(Card,{key:i,className:\"col-sm-4\",product:product,myStyle:{backgroundImage:\"none\"}});})))));};export default Product;","map":{"version":3,"sources":["D:/B Tech/WebD/Ecommerce_webApp/ecommerce-frontend/src/core/Product.js"],"names":["React","useState","useEffect","Redirect","Layout","read","listRelated","Card","ShowImage","addItem","moment","Product","props","product","setProduct","error","setError","relatedProduct","setRelatedProduct","currentURL","setURL","redirect","setRedirect","loadSingleProduct","productId","then","data","_id","products","match","params","addToCart","shouldRedirect","showAddToCartButton","quantity","showStock","showRelatedProductsHeader","length","backgroundImage","name","category","margin","whiteSpace","marginRight","description","display","price","createdAt","fromNow","map","i"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport Layout from './Layout';\r\nimport {read,listRelated} from './apiCore';\r\nimport Card from './Card';\r\nimport ShowImage from './ShowImage';\r\nimport {addItem} from './cartHelpers';\r\nimport moment from 'moment';\r\nimport '../styles.css';\r\n\r\n\r\nconst Product=(props)=>{\r\n\r\n    const [product,setProduct]=useState({});\r\n    const [error,setError]=useState(false);\r\n    const [relatedProduct,setRelatedProduct]=useState([]);\r\n    const [currentURL,setURL]=useState('');\r\n    const [redirect,setRedirect]=useState(false);\r\n\r\n    const loadSingleProduct=productId=>{\r\n        read(productId)\r\n        .then(data=>{\r\n            if(data.error){\r\n                setError(data.error);\r\n            }else{\r\n                setProduct(data);\r\n                //fetching the related products (based on category)\r\n                listRelated(data._id)\r\n                    .then(products=>{\r\n                        if(products.error){\r\n                            setError(products.error);\r\n                        }else{\r\n                            setRelatedProduct(products);\r\n                        }\r\n                    })\r\n            }\r\n        });\r\n    };\r\n\r\n   \r\n\r\n    useEffect(()=>{\r\n        const productId=props.match.params.productId;   //props object is provided by react-router-dom\r\n            //we are extracting productId FROM URL at the time the Product component is mounted. This \r\n            //is because we want to display all the info as soon as the page loads.\r\n        loadSingleProduct(productId); \r\n    },[props]);     //specifyin \"props\" here means that whenever there is a change in props object\r\n                    //useEffect will run again.This helps in rendering the next item in related proucts.\r\n\r\n                    \r\n    const addToCart=()=>{ \r\n        addItem(product,()=>{\r\n            setRedirect(true); \r\n        });\r\n    };\r\n            \r\n    const shouldRedirect=redirect=>{\r\n        if(redirect){\r\n            return <Redirect to=\"/cart\" />\r\n        }\r\n    }\r\n\r\n    const showAddToCartButton=quantity=>{\r\n        return quantity>0 ?(\r\n            <button onClick={addToCart} className=\"btn btn-outline-warning mt-2 mb-2\">\r\n                Add to Cart\r\n            </button>\r\n        ):(\r\n            <button className=\"btn btn-outline-warning mt-2 mb-2\" disabled>\r\n                Add to Cart\r\n            </button>\r\n        )\r\n    };\r\n\r\n    const showStock=quantity=>{\r\n        return quantity>0 ? (\r\n            quantity<5 ? (\r\n                <span className=\"badge badge-warning badge-pill\">Only {quantity} pieces left.Hurry..! Order Now.</span>\r\n            ):(\r\n                <span className=\"badge badge-primary badge-pill\">In Stock</span>\r\n            )\r\n        ):(\r\n            <span className=\"badge badge-danger badge-pill\">Out of Stock</span>\r\n        )\r\n    };\r\n\r\n    const showRelatedProductsHeader=()=>{\r\n    return   relatedProduct.length>0 ?  (<div className=\"mt-4\">\r\n                                    <h2>Related Products</h2>\r\n                                </div> ) :(\r\n                                    <div></div>\r\n                                )\r\n    }\r\n\r\n\r\n    return (\r\n    <div style={{backgroundImage: \"linear-gradient(rgba(0,0,0,0.1),rgba(0,0,0,0.1))\"}}>\r\n        <Layout title={product && product.name} \r\n            description={product && product.category && product.category.name} className=\"container-fluid\" >\r\n            \r\n            <div className=\"row\" >\r\n                <div className=\"col-4 mt-10\">\r\n                    <ShowImage item={product} url=\"product\" />\r\n                </div>\r\n                {shouldRedirect(redirect)}\r\n                <div className=\"col-6 \" \r\n                    style={{margin:\"30px\",whiteSpace:\"pre-wrap\",\r\n                               marginRight:\"40\" }}>\r\n                        <h2>Description</h2>\r\n                        <p className=\"lead\">\r\n                            {(product.description) }\r\n                        </p>\r\n                        <div>\r\n                            <h6 style={{display:\"inline-block\"}}>Price :  </h6> \r\n                            <h5 style={{display:\"inline-block\"}}>{\"Rs \"+product.price}</h5  >\r\n                        </div>\r\n                        <div>\r\n                            Added {moment(product.createdAt).fromNow()}...\r\n                        </div>\r\n                        <p>\r\n                            {showStock(product.quantity)}\r\n                        </p>\r\n                        <p>\r\n                            {showAddToCartButton(product.quantity)}\r\n                        </p>                    \r\n                </div>\r\n            </div>\r\n            {showRelatedProductsHeader()}  \r\n            \r\n            <div className=\"container-fluid testimonial-group\" >\r\n            <div className=\"row text-center flex-nowrap\" >\r\n                \r\n                    {relatedProduct && relatedProduct.map((product,i)=>(\r\n                        <Card key={i} className=\"col-sm-4\" product={product} myStyle={{backgroundImage:\"none\"}} />\r\n                    ))}\r\n                \r\n            </div>      \r\n            </div>                               \r\n        </Layout>  \r\n    </div> \r\n    );\r\n};\r\n\r\nexport default Product;"]},"metadata":{},"sourceType":"module"}