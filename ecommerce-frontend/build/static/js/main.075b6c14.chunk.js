(this["webpackJsonpecommerce-frontend"]=this["webpackJsonpecommerce-frontend"]||[]).push([[0],{31:function(e,t,a){},40:function(e,t,a){e.exports=a(76)},62:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=a(4),s=a(6),i=a(7),m=a(1),u=a(2),d="http://localhost:8000/api",p=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(m.a)(Object(m.a)({},e),{},{count:1})),a=Array.from(new Set(a.map((function(e){return e._id})))).map((function(e){return a.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(a)),t())},E=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},b=Object(s.g)((function(e){var t,a=e.history;return r.a.createElement("div",{style:(t={position:"-webkit-sticky"},Object(i.a)(t,"position","sticky"),Object(i.a)(t,"top",0),Object(i.a)(t,"zIndex",12),t)},r.a.createElement("ul",{className:"nav nav-tabs bg-primary"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(a,"/"),to:"/"},"Home")),p()&&0===p().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(a,"/user/dashboard"),to:"/user/dashboard"},"Dashboard")),p()&&1===p().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(a,"/admin/dashboard"),to:"/admin/dashboard"},"Dashboard")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(a,"/shop"),to:"/shop"},"Shop")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(a,"/cart"),to:"/cart"},"Cart ",r.a.createElement("sup",{className:"badge badge-dark"},"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0))),!p()&&r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(a,"/signin"),to:"/signin"},"SignIn")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:E(a,"/signup"),to:"/signup"},"SignUp"))),p()&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(d,"/signout"),{method:"GET"}).then((function(e){console.log("signout",e)})).catch((function(e){console.log(e)}))}((function(){a.push("/")}))}},"SignOut"))))})),h=(a(31),function(e){var t=e.title,a=void 0===t?"Title":t,n=e.description,c=void 0===n?"Description":n,o=e.className,l=e.children;return r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",null,a),r.a.createElement("p",{className:"lead"},c)),r.a.createElement("div",{className:o},l))}),g=function(){var e=Object(n.useState)({name:"",email:"",password:"",confirmPassword:"",error:"",success:!1}),t=Object(u.a)(e,2),a=t[0],c=t[1],o=a.name,s=a.email,p=a.password,f=a.success,E=a.error,b=a.confirmPassword,g=function(e){return function(t){c(Object(m.a)(Object(m.a)({},a),{},Object(i.a)({error:!1},e,t.target.value)))}},N=function(e){var t;e.preventDefault(),c(Object(m.a)(Object(m.a)({},a),{},{error:!1})),(t={name:o,email:s,password:p,confirmPassword:b},fetch("".concat(d,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?c(Object(m.a)(Object(m.a)({},a),{},{error:e.error,confirmPassword:"",success:!1})):c(Object(m.a)(Object(m.a)({},a),{},{name:"",email:"",password:"",confirmPassword:"",error:"",success:!0}))}))};return r.a.createElement(h,{title:"Signup",description:"Signup to E-commerce App",className:"container col-md-6 offset-md-2"},r.a.createElement("div",{className:"alert alert-danger",style:{display:E?"":"none"}},E),r.a.createElement("div",{className:"alert alert-info",style:{display:f?"":"none"}},"Account successfully created. Please ",r.a.createElement(l.b,{to:"/signin"},"Signin"),"  to continue."),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:g("name"),type:"text",className:"form-control",value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:g("email"),type:"email",className:"form-control",value:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:g("password"),type:"password",className:"form-control",value:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Confirm Password"),r.a.createElement("input",{onChange:g("confirmPassword"),type:"password",className:"form-control",value:b})),r.a.createElement("button",{onClick:N,className:"btn btn-primary"},"Submit")))},N=function(){var e=Object(n.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(u.a)(e,2),a=t[0],c=t[1],o=a.email,l=a.password,f=a.loading,E=a.error,b=a.redirectToReferrer,g=p().user,N=function(e){return function(t){c(Object(m.a)(Object(m.a)({},a),{},Object(i.a)({error:!1},e,t.target.value)))}},v=function(e){e.preventDefault(),c(Object(m.a)(Object(m.a)({},a),{},{error:!1,loading:!0})),function(e){return fetch("".concat(d,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({email:o,password:l}).then((function(e){e.error?c(Object(m.a)(Object(m.a)({},a),{},{password:"",error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){c(Object(m.a)(Object(m.a)({},a),{},{redirectToReferrer:!0}))}))}))};return r.a.createElement(h,{title:"Signin",description:"Signup to E-commerce App",className:"container col-md-6 offset-md-2"},r.a.createElement("div",{className:"alert alert-danger",style:{display:E?"":"none"}},E),f&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:N("email"),type:"email",className:"form-control",value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:N("password"),type:"password",className:"form-control",value:l})),r.a.createElement("button",{onClick:v,className:"btn btn-primary"},"Submit")),b?g&&1===g.role?r.a.createElement(s.a,{to:"/admin/dashboard"}):r.a.createElement(s.a,{to:"/user/dashboard"}):p()?r.a.createElement(s.a,{to:"/"}):void 0)},v=a(35),y=a.n(v),j=function(e){return fetch("".concat(d,"/products?sortBy=").concat(e,"&order=desc&limit=6"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},O=function(){return fetch("".concat(d,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},w=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={limit:t,skip:e,filters:a};return fetch("".concat(d,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},S=function(e){var t=e.item,a=e.url;return r.a.createElement("div",{className:"product-img mb-4"},r.a.createElement("img",{src:"".concat(d,"/").concat(a,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{height:"auto",borderRadius:"10px",maxWidth:"100%",maxHeight:"100%",width:"auto9"}}))},k=function(e){var t,a=e.showAddToCart,c=void 0===a||a,o=e.showRemoveProductButton,i=void 0!==o&&o,m=e.cartUpdate,d=void 0!==m&&m,p=e.run,E=void 0===p?void 0:p,b=e.setRun,h=void 0===b?function(e){return e}:b,g=e.product,N=e.myStyle,v=void 0===N?{backgroundImage:"linear-gradient(rgba(0,0,0,0.1),rgba(0,0,0,0.1))"}:N,y=Object(n.useState)(!1),j=Object(u.a)(y,2),O=j[0],w=j[1],k=Object(n.useState)(g.count),P=Object(u.a)(k,2),x=P[0],C=P[1],T=function(){f(g,(function(){w(!0)}))},A=function(e){return function(t){h(!E);var a=t.target.value,n=g.quantity;C(a<1?1:a>n?g.mx:a),t.target.value>=1&&a<=n&&function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(n,r){n._id===e&&(a[r].count=t)})),localStorage.setItem("cart",JSON.stringify(a)))}(e,t.target.value)}},I=function(){!function(e){var t=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(a,n){a._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(g._id),h(!E)};return r.a.createElement("div",{className:"col-4 mb-3 "},r.a.createElement("div",{className:"card d-flex",style:{position:"relative"}},r.a.createElement("div",{className:"card-header",style:{background:"#002b80",color:"white"}},r.a.createElement("b",null,g.name)),r.a.createElement("div",{className:"card-body ",style:v},function(e){if(e)return r.a.createElement(s.a,{to:"/cart"})}(O),r.a.createElement("center",null,r.a.createElement("div",{className:"d-flex",style:{width:"100%",height:"100%",maxWidth:"200px",maxHeight:"200px",minHeight:"200px",minWidth:"200px",position:"relative"}},r.a.createElement(S,{item:g,url:"product"}))),r.a.createElement("p",null,g.description.substring(0,25)+"......."),r.a.createElement("p",null,"Rs ",g.price),r.a.createElement("p",null,(t=g.quantity)>0?t<5?r.a.createElement("span",{className:"badge badge-warning badge-pill"},"Only ",t," pieces left.Hurry..! Order Now."):r.a.createElement("span",{className:"badge badge-primary badge-pill"},"In Stock"):r.a.createElement("span",{className:"badge badge-danger badge-pill"},"Out of Stock")),r.a.createElement(l.b,{to:"/product/".concat(g._id)},r.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2",onClick:function(){return window.scrollTo(0,0)}},"View Product")),c&&function(e){return e>0?r.a.createElement("button",{onClick:T,className:"btn btn-outline-warning ml-2 "},"Add to Cart"):r.a.createElement("button",{className:"btn btn-outline-warning ml-2",disabled:!0},"Add to Cart")}(g.quantity),function(e){return e&&r.a.createElement("button",{onClick:I,className:"btn btn-outline-danger ml-2 "},"Remove Product")}(i),function(e){return e&&r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",style:{background:"#5c8a8a",color:"white"}},"Adjust Quantity")),r.a.createElement("input",{type:"number",className:"form-control",min:"1",max:g.quantity,onKeyPress:function(e){e.preventDefault()},value:x,onChange:A(g._id)}))}(d))))},P=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:"",searched:!1}),t=Object(u.a)(e,2),a=t[0],c=t[1],o=a.categories,l=a.category,s=a.search,p=a.results,f=a.searched;Object(n.useEffect)((function(){O().then((function(e){e.error?console.log(e.error):c(Object(m.a)(Object(m.a)({},e),{},{categories:e}))}))}),[]);var E=function(){s&&function(e){var t=y.a.stringify(e);return fetch("".concat(d,"/products/search?").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({search:s||void 0,category:l}).then((function(e){e.error?console.log(e.error):c(Object(m.a)(Object(m.a)({},a),{},{results:e,searched:!0}))}))},b=function(e){e.preventDefault(),E()},h=function(e){return function(t){var n;c(Object(m.a)(Object(m.a)({},a),{},(n={},Object(i.a)(n,e,t.target.value),Object(i.a)(n,"searched",!1),n)))}},g=function(e,t){if(e){if(t.length>0)return"Found ".concat(t.length," products");if(t.length<1)return"No products found"}};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"container mb-3"},r.a.createElement("form",{onSubmit:b},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("select",{className:"btn mr-2",onChange:h("category")},r.a.createElement("option",{value:"All"},"All"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("input",{type:"search",className:"form-control",onChange:h("search"),placeholder:"Search for products"})),r.a.createElement("div",{className:"input-group-append",style:{border:"none"}},r.a.createElement("button",{className:"input-group-text ml-2"},"Search "))))),r.a.createElement("div",{className:"container-fluid mb-3"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement("div",null,r.a.createElement("h2",{className:"mt-4 mb-4"},g(f,e)),r.a.createElement("div",{className:"row"},e&&e.map((function(e,t){return r.a.createElement(k,{key:t,product:e})}))))}(p)))},x=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),s=l[0],i=l[1],m=Object(n.useState)(!1),d=Object(u.a)(m,2),p=(d[0],d[1]);return Object(n.useEffect)((function(){j("createdAt").then((function(e){e.error?p(e.error):i(e)})),j("sold").then((function(e){e.error?p(e.error):c(e)}))}),[]),r.a.createElement(h,{title:"Home Page",description:"E-commerce App",className:"container-fluid"},r.a.createElement(P,null),r.a.createElement("h2",{className:"mb-4"},"New Arrivals"),r.a.createElement("div",{className:"row"},s.map((function(e,t){return r.a.createElement(k,{key:t,product:e})}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",{className:"mb-4 "},"Best Sellers"),r.a.createElement("div",{className:"row"},a.map((function(e,t){return r.a.createElement(k,{key:t,product:e})}))))},C=a(21),T=function(e){var t=e.component,a=Object(C.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return p()?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},A=function(e){var t=e.component,a=Object(C.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return p()&&1===p().user.role?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},I=a(15),_=a.n(I),D=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=p().user,s=o._id,i=o.name,m=o.email,f=o.role,E=p().token,b=function(e,t){(function(e,t){return fetch("".concat(d,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?console.lof(e.error):c(e)}))};Object(n.useEffect)((function(){b(s,E)}),[]);return r.a.createElement(h,{title:"Dashboard",description:"Welcome ".concat(i,"!"),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"User Links "),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/cart"},"My Cart")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/profile/".concat(s)},"Update Profile")),f>0?r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/admin/dashboard"},"Admin Dashboard ")):null))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},i),r.a.createElement("li",{className:"list-group-item"},m),r.a.createElement("li",{className:"list-group-item"},f?"Admin":"Registered User"))),function(e){return r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"Purchase history"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},e.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("hr",null),e.products.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h6",null,"Product name: ",e.name),r.a.createElement("h6",null,"Product price: $",e.price),r.a.createElement("h6",null,"Purchase date:"," ",_()(e.createdAt).format("MMMM Do YYYY, h:mm:ss a")))})))})))))}(a))))},R=function(e){var t=e.match,a=Object(n.useState)({name:"",email:"",password:"",newPassword:"",confirmPassword:"",error:"",success:!1}),c=Object(u.a)(a,2),o=c[0],l=c[1],f=o.name,E=o.email,b=o.password,g=o.newPassword,N=o.success,v=o.error,y=o.confirmPassword,j=p().token,O=function(e){(function(e,t){return fetch("".concat(d,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,j).then((function(e){e.error?l(Object(m.a)(Object(m.a)({},o),{},{error:!0})):l(Object(m.a)(Object(m.a)({},o),{},{name:e.name,email:e.email}))}))};Object(n.useEffect)((function(){O(t.params.userId)}),[]);var w=function(e){return function(t){l(Object(m.a)(Object(m.a)({},o),{},Object(i.a)({error:!1},e,t.target.value)))}},S=function(e){e.preventDefault(),function(e,t,a){return fetch("".concat(d,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.userId,j,{name:f,email:E,password:b,newPassword:g,confirmPassword:y}).then((function(e){e.error?l(Object(m.a)(Object(m.a)({},o),{},{error:e.error,confirmPassword:""})):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var a=JSON.parse(localStorage.getItem("jwt"));a.user=e,localStorage.setItem("jwt",JSON.stringify(a)),t()}}(e,(function(){l(Object(m.a)(Object(m.a)({},o),{},{name:e.name,email:e.email,success:!0}))}))}))};return r.a.createElement(h,{title:"Profile",description:"Update your profile",className:"container-fluid"},r.a.createElement("div",{className:"mr-5 ml-5 pr-5 pl-5"},r.a.createElement("h2",{className:"mb-4"},"Profile Update"),r.a.createElement("div",{className:"alert alert-danger",style:{display:v?"":"none"}},v),function(e,t){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{type:"text",onChange:w("name"),className:"form-control",value:e})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{type:"email",onChange:w("email"),className:"form-control",value:t,disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{type:"password",onChange:w("password"),className:"form-control",value:b})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"New Password"),r.a.createElement("input",{type:"password",onChange:w("newPassword"),className:"form-control",value:g})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Confirm New Password"),r.a.createElement("input",{type:"password",onChange:w("confirmPassword"),className:"form-control",value:y})),r.a.createElement("button",{onClick:S,className:"btn btn-primary"},"Submit"))}(f,E),function(e){if(e)return r.a.createElement(s.a,{to:"/user/dashboard"})}(N)))},B=function(){var e=p().user,t=e.name,a=e.email,n=e.role;return r.a.createElement(h,{title:"Dashboard",description:"Welcome ".concat(t,"!"),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Admin Links "),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/create/category"},"Create Category")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/create/product"},"Create Product")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/admin/orders"},"Manage Orders")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/admin/products"},"Manage Products")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{className:"nav-link",to:"/user/dashboard"},"User Dashboard "))))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},t),r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},n?"Admin":"Registered User"))))))},J=function(){return fetch("".concat(d,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},q=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(u.a)(o,2),i=s[0],m=s[1],f=Object(n.useState)(!1),E=Object(u.a)(f,2),b=E[0],g=E[1],N=p(),v=N.user,y=N.token,j=function(e){m(""),g(""),c(e.target.value)},O=function(e){e.preventDefault(),m(""),g(!1),function(e,t,a){return fetch("".concat(d,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(v._id,y,{name:a}).then((function(e){e.error?(g(""),m(!0)):(m(""),g(!0))}))};return r.a.createElement(h,{title:"Add a new Category",description:"Welcome ".concat(v.name,"!")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},function(){if(b)return r.a.createElement("h3",{className:"text-success"},'Category "',a,'" is created.')}(),function(){if(i)return r.a.createElement("h3",{className:"text-danger"},'Category "',a,'" already exists!')}(),r.a.createElement("form",{onSubmit:O},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{type:"text",className:"form-control",onChange:j,value:a,autoFocus:!0,required:!0})),r.a.createElement("button",{className:"btn btn-outline-primary"},"Create Category")),r.a.createElement("div",{className:"mt-5"},r.a.createElement(l.b,{to:"/admin/dashboard",className:"text-warning"},"<- Go Back to Dashboard")))))},F=function(){var e=p(),t=e.user,a=e.token,c=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:new FormData}),o=Object(u.a)(c,2),l=o[0],s=o[1],f=l.name,E=l.description,b=l.price,g=(l.category,l.shipping,l.categories),N=l.quantity,v=l.loading,y=l.error,j=l.createdProduct,O=(l.redirectToProfile,l.formData);Object(n.useEffect)((function(){J().then((function(e){e.error?s(Object(m.a)(Object(m.a)({},l),{},{error:e.error})):s(Object(m.a)(Object(m.a)({},l),{},{categories:e,formData:new FormData}))}))}),[]);var w=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;O.set(e,a),s(Object(m.a)(Object(m.a)({},l),{},Object(i.a)({},e,a)))}},S=function(e){e.preventDefault(),s(Object(m.a)(Object(m.a)({},l),{},{error:"",loading:!0})),function(e,t,a){return fetch("".concat(d,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(t._id,a,O).then((function(e){var t=Object.keys(e).map((function(t){return[Number(t),e[t]]}));e.error?s(Object(m.a)(Object(m.a)({},l),{},{error:e.error})):(s(Object(m.a)(Object(m.a)({},l),{},{name:"",description:"",price:"",photo:"",loading:!1,quantity:"",category:"",createdProduct:t[0][1].name})),document.getElementById("all_cat").selectedIndex="0",document.getElementById("ship_status").selectedIndex="0")}))};return r.a.createElement(h,{title:"Add a new Product",description:"Welcome ".concat(t.name,"!")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},v&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"alert alert-info",style:{display:j?"":"none"}},r.a.createElement("h2",null,'Product "',"".concat(j," "),'" is created!')),r.a.createElement("div",{className:"alert alert-danger",style:{display:y?"":"none"}},y),r.a.createElement("form",{className:"mb-3",onSubmit:S},r.a.createElement("h4",null,"Attach Photo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{onChange:w("photo"),type:"file",name:"photo",accept:"image/*"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:w("name"),type:"text",className:"form-control",value:f})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description"),r.a.createElement("textarea",{onChange:w("description"),className:"form-control",value:E,style:{whiteSpace:"pre"}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price"),r.a.createElement("input",{onChange:w("price"),type:"number",className:"form-control",value:b})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category "),r.a.createElement("select",{onChange:w("category"),className:"form-control",id:"all_cat"},r.a.createElement("option",null,"Please Select"),g&&g.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Shipping"),r.a.createElement("select",{onChange:w("shipping"),className:"form-control",id:"ship_status"},r.a.createElement("option",null,"Please Select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity"),r.a.createElement("input",{onChange:w("quantity"),type:"number",className:"form-control",value:N})),r.a.createElement("button",{className:"btn btn-outline-primary"},"Create Product")))))},U=a(79),z=a(80),G=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),s=l[0],i=l[1],m=p(),f=m.user,E=m.token,b=function(){(function(e,t){return fetch("".concat(d,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f._id,E).then((function(e){e.error?console.log(e.error):c(e)}))},g=function(){(function(e,t){return fetch("".concat(d,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f._id,E).then((function(e){e.error?console.log(e.error):i(e)}))};Object(n.useEffect)((function(){b(),g()}),[]);var N=function(e,t){(function(e,t,a,n){return fetch("".concat(d,"/order/:").concat(a,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({orderId:a,status:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(f._id,E,t,e.target.value).then((function(e){e.error?console.log("Failure in status updation"):b()}))},v=function(e,t){return r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("b",null,e)," ")),r.a.createElement("input",{type:"text",value:t,key:"key+value",className:"form-control",readOnly:!0}))};return r.a.createElement(h,{title:"Orders"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},a.length>0?r.a.createElement("h1",{className:"text-danger "},"Total Orders : ",a.length):r.a.createElement("h1",{className:"text-danger text-muted"},"No Orders to display..."),r.a.createElement(U.a,null,a.map((function(e,t){return r.a.createElement(z.a,{key:t},r.a.createElement(U.a.Toggle,{as:z.a.Header,eventKey:t},r.a.createElement("center",null,r.a.createElement("b",null,"Order Id :-"),"  ",e._id)),r.a.createElement(U.a.Collapse,{eventKey:t},r.a.createElement(z.a.Body,null,r.a.createElement("ul",{className:"list-group mb-2"},r.a.createElement("li",{className:"list-group-item",key:"".concat(e._id,"+").concat(t)},r.a.createElement("b",null,"Status :- "),(a=e,r.a.createElement("div",{className:"form-group"},r.a.createElement("h3",{className:"mark mb-4"},"Status :  ",a.status),r.a.createElement("select",{className:"form-control",onChange:function(e){return N(e,a._id)}},r.a.createElement("option",null,"Update Status"),s.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))))),r.a.createElement("li",{className:"list-group-item",key:"".concat(e.transaction_Id,"+").concat(t)},r.a.createElement("b",null,"TransactionId :- "),e.transaction_Id),r.a.createElement("li",{className:"list-group-item",key:"".concat(e.amount,"+").concat(t)},r.a.createElement("b",null,"Amount :- "),"Rs ",e.amount),r.a.createElement("li",{className:"list-group-item",key:"".concat(e.user.name,"+").concat(t)},r.a.createElement("b",null,"Ordered by :- "),e.user.name),r.a.createElement("li",{className:"list-group-item",key:"".concat(e.createdAt,"+").concat(t)},r.a.createElement("b",null,"Ordered on :- "),_()(e.createdAt).fromNow()),r.a.createElement("li",{className:"list-group-item",key:"".concat(e.address,"+").concat(t)},r.a.createElement("b",null,"Delivery address :- "),e.address)),r.a.createElement("h3",{className:"mt-4 mb-4 font-italic"},"Total products in the order : ",e.products.length),r.a.createElement("ul",null,e.products.map((function(e,t){return r.a.createElement("div",{className:"mb-4",key:t,style:{padding:"20px",border:"1px solid indigo"}},v("Product name",e.name),v("Product price",e.price),v("Product total",e.count),v("Product id",e._id))}))))));var a}))))))},M=a(18),W=function(e){var t=e.categories,a=e.handleFilters,c=Object(n.useState)([]),o=Object(u.a)(c,2),l=o[0],s=o[1],i=function(e){return function(){var t=l.indexOf(e),n=Object(M.a)(l);-1===t?n.push(e):n.splice(t,1),s(n),a(n)}};return t.map((function(e,t){return r.a.createElement("li",{key:t,className:"list-unstyled"},r.a.createElement("input",{onChange:i(e._id),value:l.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),r.a.createElement("label",{className:"form-check-label"},e.name))}))},H=[{_id:0,name:"Any",array:[]},{_id:1,name:"Rs0 to Rs99",array:[0,99]},{_id:2,name:"Rs100 to Rs999",array:[100,999]},{_id:3,name:"Rs1,000 to Rs9,999",array:[1e3,9999]},{_id:4,name:"Rs10,000 to Rs49,999",array:[1e4,49999]},{_id:5,name:"Rs50,000 to Rs99,999",array:[5e4,99999]},{_id:6,name:"Rs1,00,000 and Above",array:[1e5,1e8]}],Y=function(e){var t=e.prices,a=e.handleFilters,c=Object(n.useState)({}),o=Object(u.a)(c,2),l=(o[0],o[1]),s=function(e){a(e.target.value),l(e.target.value)};return t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("input",{onChange:s,id:t,value:"".concat(e._id),name:e,type:"radio",className:"mr-2 ml-4"}),r.a.createElement("label",{className:"form-check-label"},e.name))}))},L=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),s=l[0],i=l[1],d=Object(n.useState)(!1),p=Object(u.a)(d,2),f=(p[0],p[1]),E=Object(n.useState)(6),b=Object(u.a)(E,2),g=b[0],N=(b[1],Object(n.useState)(0)),v=Object(u.a)(N,2),y=v[0],j=v[1],S=Object(n.useState)(0),P=Object(u.a)(S,2),x=P[0],C=P[1],T=Object(n.useState)(0),A=Object(u.a)(T,2),I=A[0],_=A[1],D=function(e){w(y,g,e).then((function(e){e.error?f(e.error):(_(e.data),C(e.size),j(0))}))},R=function(){var e=y+g;w(e,g,a.filters).then((function(t){t.error?f(t.error):(_([].concat(Object(M.a)(I),Object(M.a)(t.data))),C(t.size),j(e))}))};Object(n.useEffect)((function(){O().then((function(e){e.error?f(e.error):i(e)})),D(y,a.filters)}),[]);var B=function(e,t){var n=Object(m.a)({},a);if(n.filters[t]=e,"price"===t){var r=J(e);n.filters[t]=r}D(a.filters),c(n)},J=function(e){var t=H,a=[];for(var n in t)t[n]._id===parseInt(e)&&(a=t[n].array);return a};return r.a.createElement(h,{title:"Welcome!",description:"Be a Shopaholic! Now choose from a wide variety of products.",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},s.length>0?r.a.createElement("div",null,r.a.createElement("h4",null,"Filter by categories"),r.a.createElement("ul",null,r.a.createElement(W,{categories:s,handleFilters:function(e){return B(e,"category")}}))):null,r.a.createElement("h4",null,"Filter by price"),r.a.createElement("div",null,r.a.createElement(Y,{prices:H,handleFilters:function(e){return B(e,"price")}}))),r.a.createElement("div",{className:"col-8"},r.a.createElement("h2",{className:"mb-4-"},"Products"),r.a.createElement("div",{className:"row"},I.length>0?I.map((function(e,t){return r.a.createElement(k,{key:t,product:e})})):" "),r.a.createElement("br",null),r.a.createElement("h2",{className:"text-muted"},r.a.createElement("div",{style:{display:x?"none":""}},"No products found in this filter. Try out some other filter options .")),x>0&&x>=g&&r.a.createElement("button",{onClick:R,className:"btn btn-warning mb-5"},"Load more"))))},Q=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),i=Object(u.a)(l,2),m=(i[0],i[1]),p=Object(n.useState)([]),E=Object(u.a)(p,2),b=E[0],g=E[1],N=Object(n.useState)(""),v=Object(u.a)(N,2),y=(v[0],v[1],Object(n.useState)(!1)),j=Object(u.a)(y,2),O=j[0],w=j[1],P=function(e){(function(e){return fetch("".concat(d,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?m(e.error):(o(e),function(e){return fetch("".concat(d,"/products/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.error?m(e.error):g(e)})))}))};Object(n.useEffect)((function(){var t=e.match.params.productId;P(t)}),[e]);var x,C=function(){f(c,(function(){w(!0)}))};return r.a.createElement("div",{style:{backgroundImage:"linear-gradient(rgba(0,0,0,0.1),rgba(0,0,0,0.1))"}},r.a.createElement(h,{title:c&&c.name,description:c&&c.category&&c.category.name,className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 mt-10"},r.a.createElement(S,{item:c,url:"product"})),function(e){if(e)return r.a.createElement(s.a,{to:"/cart"})}(O),r.a.createElement("div",{className:"col-6 ",style:{margin:"30px",whiteSpace:"pre-wrap",marginRight:"40"}},r.a.createElement("h2",null,"Description"),r.a.createElement("p",{className:"lead"},c.description),r.a.createElement("div",null,r.a.createElement("h6",{style:{display:"inline-block"}},"Price :  "),r.a.createElement("h5",{style:{display:"inline-block"}},"Rs "+c.price)),r.a.createElement("div",null,"Added ",_()(c.createdAt).fromNow(),"..."),r.a.createElement("p",null,(x=c.quantity)>0?x<5?r.a.createElement("span",{className:"badge badge-warning badge-pill"},"Only ",x," pieces left.Hurry..! Order Now."):r.a.createElement("span",{className:"badge badge-primary badge-pill"},"In Stock"):r.a.createElement("span",{className:"badge badge-danger badge-pill"},"Out of Stock")),r.a.createElement("p",null,function(e){return e>0?r.a.createElement("button",{onClick:C,className:"btn btn-outline-warning mt-2 mb-2"},"Add to Cart"):r.a.createElement("button",{className:"btn btn-outline-warning mt-2 mb-2",disabled:!0},"Add to Cart")}(c.quantity)))),b.length>0?r.a.createElement("div",{className:"mt-4"},r.a.createElement("h2",null,"Related Products")):r.a.createElement("div",null),r.a.createElement("div",{className:"container-fluid testimonial-group"},r.a.createElement("div",{className:"row text-center flex-nowrap"},b&&b.map((function(e,t){return r.a.createElement(k,{key:t,className:"col-sm-4",product:e,myStyle:{backgroundImage:"none"}})}))))))},K=(a(62),a(38)),V=a.n(K),$=function(e){var t=e.products,a=Object(n.useState)({success:!1,clientToken:null,error:"",instance:{},address:""}),c=Object(u.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)(!1),f=Object(u.a)(i,2),E=f[0],b=f[1],h=Object(n.useState)(!0),g=Object(u.a)(h,2),N=g[0],v=g[1],y=Object(n.useState)(!1),j=Object(u.a)(y,2),O=j[0],w=j[1],S=p()&&p().user._id,k=p()&&p().token,P=function(e,t){(function(e,t){return fetch("".concat(d,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?s(Object(m.a)(Object(m.a)({},e),{},{error:e.error})):s({clientToken:e.clientToken})}))};Object(n.useEffect)((function(){P(S,k)}),[]);var x=function(){return(100*t.reduce((function(e,t){return e+t.count*t.price}),0)/100).toFixed(2)},C=function(e){return function(){o.address?b(!e):window.alert("Please fill in the Delivery Address to proceed")}},T=function(){w(!0),v(!1)},A=function(e){s(Object(m.a)(Object(m.a)({},o),{},{address:e.target.value}))},I=function(){var e=o.address;o.instance.requestPaymentMethod().then((function(a){var n={paymentMethodNonce:a.nonce,amount:x()};(function(e,t,a){return fetch("".concat(d,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(S,k,n).then((function(n){var r={products:t,transaction_Id:n.transaction.id,amount:n.transaction.amount,address:e};(function(e,t,a){return fetch("".concat(d,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(S,k,r).then((function(e){var t;t=function(){console.log("payment done and cart is emptied")},"undefined"!==typeof window&&(localStorage.removeItem("cart"),t()),s(Object(m.a)(Object(m.a)({},a),{},{success:!0}))}))})).catch((function(e){s(Object(m.a)(Object(m.a)({},a),{},{error:e}))}))})).catch((function(e){s(Object(m.a)(Object(m.a)({},o),{},{error:e.message}))}))},_=Object(n.useState)(!0),D=Object(u.a)(_,2),R=D[0],B=D[1];return r.a.createElement(n.Fragment,null,r.a.createElement("table",{id:"bill",className:"mb-5"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Price(Rs)"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Total(Rs)"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.count),r.a.createElement("td",null,e.count*e.price))}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3"},r.a.createElement("center",null,r.a.createElement("b",null,"Grand total:-"))),r.a.createElement("td",{style:{background:"#003399",color:"white"}},r.a.createElement("b",null,"Rs ",x()," "))))),O&&r.a.createElement("div",{className:"mb-4"},r.a.createElement("h3",null,"Delivery Address"),r.a.createElement("textarea",{onChange:A,className:"form-control",value:o.address,placeholder:"Type delivery address..."}),r.a.createElement("button",{className:"btn mt-3",onClick:C(E),style:{float:"right",background:"orange"}},r.a.createElement("b",null,"Proceed to Pay ->"))),r.a.createElement("div",{style:{marginBottom:"100px",float:"right"}},function(e){return e?r.a.createElement("div",null,p()?r.a.createElement("button",{className:"btn ",onClick:T,style:{background:"yellow"}},r.a.createElement("b",null,"Checkout ->")):r.a.createElement(l.b,{to:"/signin"},r.a.createElement("button",{className:"btn btn-primary"},r.a.createElement("b",null,"Sign in to Checkout ->")))):null}(N)),r.a.createElement("div",{className:"mt-5"},function(e){return e?r.a.createElement("div",{id:"myModal1",className:"modal1"},r.a.createElement("div",{className:"modal1-content"},r.a.createElement("div",{className:"modal1-header"},r.a.createElement("span",{onClick:C(e),className:"close"},"\xd7"),r.a.createElement("p",{className:"mt-3"},r.a.createElement("b",null,"Please fill in the details to continue."))),r.a.createElement("div",{className:"modal1-body"},(c=o.error,r.a.createElement("div",{className:"alert alert-danger",style:{display:c?"":"none"}},c)),(a=o.success,r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"alert alert-info",style:{display:a?"":"none"}},"Payment Successful..!"),r.a.createElement("div",{className:"invisible"},1==a?setTimeout((function(){return window.location.reload()}),300):null))),function(){if(R)return r.a.createElement("div",{id:"loading",className:"text-muted"},r.a.createElement("h6",null,"This may take a few seconds... Please refrain from reloading or closing tab."))}(),r.a.createElement("div",{className:"invisible"},setTimeout((function(){return B(!1)}),3e3)),r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return s(Object(m.a)(Object(m.a)({},o),{},{error:""}))}},null!=o.clientToken&&t.length>0?r.a.createElement("div",null,r.a.createElement(V.a,{options:{authorization:o.clientToken},onInstance:function(e){return o.instance=e}})):null),o.success?null:r.a.createElement("button",{onClick:I,style:{float:"right"}},"Pay"))),r.a.createElement("div",{className:"modal1-footer"}))):null;var a,c}(E)))},X=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(u.a)(o,2),i=s[0],m=s[1];Object(n.useEffect)((function(){c("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[i]);return r.a.createElement(h,{title:"Shopping Cart",description:"Manage all that you wish to buy . Happy Shopping :)",className:"container-fluid"},a.length?r.a.createElement("div",null,r.a.createElement("h2",null,"Your cart has ","".concat(a.length)," item(s)"),r.a.createElement("hr",null)):r.a.createElement("div",null,r.a.createElement("h2",null,"Your cart is empty.",r.a.createElement("br",null)),r.a.createElement("h3",null,"Goto ",r.a.createElement(l.b,{to:"/shop"},"Shop")," and enjoy shopping.")),r.a.createElement("div",{className:"row"},a&&a.map((function(e,t){return r.a.createElement(k,{key:t,product:e,showAddToCart:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:m,run:i})}))),r.a.createElement("div",{className:"mb-5"},a.length>0?r.a.createElement("div",{className:"mt-5"},r.a.createElement("h2",null,"Cart Summary"),r.a.createElement("hr",null),r.a.createElement("div",{className:" ml-5 mr-5 pl-5 pr-5"},r.a.createElement($,{products:a}))):""))},Z=function(){var e=p(),t=e.user,a=e.token,c=Object(n.useState)([]),o=Object(u.a)(c,2),s=o[0],i=o[1],m=function(){fetch("".concat(d,"/products"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):i(e)}))},f=function(e){(function(e,t,a){return fetch("".concat(d,"/product/").concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t._id,a).then((function(e){e.error?console.log(e.error):m()}))};return Object(n.useEffect)((function(){m()}),[]),r.a.createElement(h,{title:"Manage Products",description:"Welcome to produts inventory ".concat(t.name,"!"),className:"container-fluid "}," ",r.a.createElement("center",null,r.a.createElement("div",{className:"row ml-5 mr-5"},r.a.createElement("div",{className:"col-10 ml-5"},r.a.createElement("h2",{className:"text-center"},s.length," products in inventory"),r.a.createElement("hr",null),r.a.createElement("ul",{className:"list-group"},s.map((function(e,t){return r.a.createElement("li",{key:t,className:"list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("b",null,t+1+") "+e.name)," ",r.a.createElement("div",{className:"float-right"},r.a.createElement(l.b,{to:"/admin/product/update/".concat(e._id)},r.a.createElement("button",{className:"btn btn-outline-warning mr-4"},"Update")),r.a.createElement("button",{onClick:function(){return f(e._id)},className:"btn btn-outline-danger"},"Delete")))})))))))},ee=function(e){var t=e.match,a=p(),c=a.user,o=a.token,l=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,createdProduct:"",redirectToProfile:!1,formData:new FormData}),f=Object(u.a)(l,2),E=f[0],b=f[1],g=E.name,N=E.description,v=E.price,y=(E.category,E.shipping,E.categories),j=E.quantity,O=E.loading,w=E.error,S=E.createdProduct,k=E.redirectToProfile,P=E.formData,x=function(e){(function(e){return fetch("".concat(d,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?b(Object(m.a)(Object(m.a)({},E),{},{error:e.error})):(b(Object(m.a)(Object(m.a)({},E),{},{name:e.name,description:e.description,price:e.price,quantity:e.quantity,shipping:e.shipping,formData:new FormData})),C())}))},C=function(){J().then((function(e){e.error?b(Object(m.a)(Object(m.a)({},E),{},{error:e.error})):b({categories:e,formData:new FormData})}))};Object(n.useEffect)((function(){x(t.params.productId)}),[]);var T=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;P.set(e,a),b(Object(m.a)(Object(m.a)({},E),{},Object(i.a)({},e,a)))}},A=function(e){e.preventDefault(),b(Object(m.a)(Object(m.a)({},E),{},{error:"",loading:!0})),function(e,t,a,n){return fetch("".concat(d,"/product/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.productId,c._id,o,P).then((function(e){e.error?b(Object(m.a)(Object(m.a)({},E),{},{error:e.error})):b(Object(m.a)(Object(m.a)({},E),{},{name:"",description:"",price:"",photo:"",loading:!1,quantity:"",error:!1,createdProduct:e.name,redirectToProfile:!0}))}))};return r.a.createElement(h,{title:"Add a new Product",description:"Welcome ".concat(c.name,"!")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},O&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"alert alert-info",style:{display:S?"":"none"}},r.a.createElement("h2",null,'Product "',"".concat(S," "),'" is updated!')),r.a.createElement("div",{className:"alert alert-danger",style:{display:w?"":"none"}},w),r.a.createElement("form",{className:"mb-3",onSubmit:A},r.a.createElement("h4",null,"Attach Photo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{onChange:T("photo"),type:"file",name:"photo",accept:"image/*"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:T("name"),type:"text",className:"form-control",value:g})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description"),r.a.createElement("textarea",{onChange:T("description"),className:"form-control",value:N,style:{whiteSpace:"pre"}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price"),r.a.createElement("input",{onChange:T("price"),type:"number",className:"form-control",value:v})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category "),r.a.createElement("select",{onChange:T("category"),className:"form-control",id:"all_cat"},r.a.createElement("option",null,"Please Select"),y&&y.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Shipping"),r.a.createElement("select",{onChange:T("shipping"),className:"form-control",id:"ship_status"},r.a.createElement("option",null,"Please Select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity"),r.a.createElement("input",{onChange:T("quantity"),type:"number",className:"form-control",value:j})),r.a.createElement("button",{className:"btn btn-outline-primary"},"Update Product")),function(){if(k&&!w)return window.alert("Product was successfully updated."),r.a.createElement(s.a,{to:"/admin/products"})}())))},te=function(){return r.a.createElement(l.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:x}),r.a.createElement(s.b,{path:"/shop",exact:!0,component:L}),r.a.createElement(s.b,{path:"/Signin",exact:!0,component:N}),r.a.createElement(s.b,{path:"/Signup",exact:!0,component:g}),r.a.createElement(T,{path:"/user/dashboard",exact:!0,component:D}),r.a.createElement(T,{path:"/profile/:userId",exact:!0,component:R}),r.a.createElement(A,{path:"/admin/dashboard",exact:!0,component:B}),r.a.createElement(A,{path:"/create/category",exact:!0,component:q}),r.a.createElement(A,{path:"/create/product",exact:!0,component:F}),r.a.createElement(A,{path:"/admin/orders",exact:!0,component:G}),r.a.createElement(A,{path:"/admin/product/update/:productId",exact:!0,component:ee}),r.a.createElement(A,{path:"/admin/products",exact:!0,component:Z}),r.a.createElement(s.b,{path:"/product/:productId",exact:!0,component:Q}),r.a.createElement(s.b,{path:"/cart",exact:!0,component:X})))};o.a.render(r.a.createElement(te,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.075b6c14.chunk.js.map